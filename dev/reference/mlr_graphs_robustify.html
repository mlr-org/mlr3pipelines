<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Creates a Graph that can be used to robustify any subsequent learner.
Performs the following steps:
Drops empty factor levels using PipeOpFixFactors
Imputes numeric features using PipeOpImputeHist and PipeOpMissInd
Imputes factor features using PipeOpImputeOOR
Encodes factors using one-hot-encoding. Factors with a cardinality &amp;gt; max_cardinality are
collapsed using PipeOpCollapseFactors


The graph is built conservatively, i.e. the function always tries to assure everything works.
If a learner is provided, some steps can be left out, i.e. if the learner can deal with
factor variables, no encoding is performed.
All input arguments are cloned and have no references in common with the returned Graph."><title>Robustify a learner — mlr_graphs_robustify • mlr3pipelines</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.6/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.6/font.css" rel="stylesheet"><link href="../deps/Roboto_Slab-0.4.6/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Robustify a learner — mlr_graphs_robustify"><meta property="og:description" content="Creates a Graph that can be used to robustify any subsequent learner.
Performs the following steps:
Drops empty factor levels using PipeOpFixFactors
Imputes numeric features using PipeOpImputeHist and PipeOpMissInd
Imputes factor features using PipeOpImputeOOR
Encodes factors using one-hot-encoding. Factors with a cardinality &amp;gt; max_cardinality are
collapsed using PipeOpCollapseFactors


The graph is built conservatively, i.e. the function always tries to assure everything works.
If a learner is provided, some steps can be left out, i.e. if the learner can deal with
factor variables, no encoding is performed.
All input arguments are cloned and have no references in common with the returned Graph."><meta property="og:image" content="https://mlr3pipelines.mlr-org.com/logo.png"><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">mlr3pipelines</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.5.0-9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">
    <span class="fa fa fa fa-file-alt"></span>
     
    Reference
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://mlr3book.mlr-org.com">
    <span class="fa fa fa fa-link"></span>
     
    mlr3book
  </a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mlr-org/mlr3pipelines/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://lmmisld-lmu-stats-slds.srv.mwn.de/mlr_invite/">
    <span class="fa fa fa fa-comments"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://stackoverflow.com/questions/tagged/mlr3">
    <span class="fab fa fab fa-stack-overflow"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://mlr-org.com/">
    <span class="fa fa-rss"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Robustify a learner</h1>
      <small class="dont-index">Source: <a href="https://github.com/mlr-org/mlr3pipelines/blob/HEAD/R/pipeline_robustify.R" class="external-link"><code>R/pipeline_robustify.R</code></a></small>
      <div class="d-none name"><code>mlr_graphs_robustify.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Creates a <code><a href="Graph.html">Graph</a></code> that can be used to robustify any subsequent learner.
Performs the following steps:</p><ul><li><p>Drops empty factor levels using <code><a href="mlr_pipeops_fixfactors.html">PipeOpFixFactors</a></code></p></li>
<li><p>Imputes <code>numeric</code> features using <code><a href="mlr_pipeops_imputehist.html">PipeOpImputeHist</a></code> and <code><a href="mlr_pipeops_missind.html">PipeOpMissInd</a></code></p></li>
<li><p>Imputes <code>factor</code> features using <code><a href="mlr_pipeops_imputeoor.html">PipeOpImputeOOR</a></code></p></li>
<li><p>Encodes <code>factors</code> using <code>one-hot-encoding</code>. Factors with a cardinality &gt; max_cardinality are
collapsed using <code><a href="mlr_pipeops_collapsefactors.html">PipeOpCollapseFactors</a></code></p></li>
</ul><p>The graph is built conservatively, i.e. the function always tries to assure everything works.
If a learner is provided, some steps can be left out, i.e. if the learner can deal with
factor variables, no encoding is performed.</p>
<p>All input arguments are cloned and have no references in common with the returned <code><a href="Graph.html">Graph</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">pipeline_robustify</span><span class="op">(</span></span>
<span>  task <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  learner <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  impute_missings <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  factors_to_numeric <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  max_cardinality <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  ordered_action <span class="op">=</span> <span class="st">"factor"</span>,</span>
<span>  character_action <span class="op">=</span> <span class="st">"factor"</span>,</span>
<span>  POSIXct_action <span class="op">=</span> <span class="st">"numeric"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>task</dt>
<dd><p><code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> <br>
A <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> to create a robustifying pipeline for.
Optional, if omitted, the "worst possible" <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> is assumed and the full pipeline is created.</p></dd>


<dt>learner</dt>
<dd><p><code><a href="https://mlr3.mlr-org.com/reference/Learner.html" class="external-link">Learner</a></code> <br>
A learner to create a robustifying pipeline for. Optional, if omitted,
the "worst possible" <code><a href="https://mlr3.mlr-org.com/reference/Learner.html" class="external-link">Learner</a></code> is assumed and a more conservative pipeline is built.</p></dd>


<dt>impute_missings</dt>
<dd><p><code>logical(1)</code> | <code>NULL</code> <br>
Should missing values be imputed? Defaults to <code>NULL</code>: imputes if the task has
missing values (or factors that are not encoded to numerics) and the learner can not handle them.</p></dd>


<dt>factors_to_numeric</dt>
<dd><p><code>logical(1)</code> | <code>NULL</code> <br>
Should (ordered and unordered) factors be encoded? Defaults to <code>NULL</code>: encodes if the task has factors (or character columns that get converted to factor)
and the learner can not handle factors.</p></dd>


<dt>max_cardinality</dt>
<dd><p><code>integer(1)</code> <br>
Maximum number of factor levels allowed. See above. Default: 1000.</p></dd>


<dt>ordered_action</dt>
<dd><p><code>character(1)</code><br>
How to handle <code>ordered</code> columns: <code>"factor"</code> (default) or <code>"factor!"</code>: convert to <code>factor</code> columns;
<code>"numeric"</code> or <code>"numeric!"</code>: convert to <code>numeric</code> columns; <code>"integer"</code> or <code>"integer!"</code>: convert to <code>integer</code> columns; <code>"ignore"</code> or <code>"ignore!"</code>: ignore.
When <code>task</code> is given and has no <code>ordered</code> columns, or when <code>learner</code> is given and can handle <code>ordered</code>, then
<code>"factor"</code>, <code>"numeric"</code> and <code>"integer"</code> are treated like <code>"ignore"</code>. This means it is necessary to add the exclamation point to
override <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> or <code><a href="https://mlr3.mlr-org.com/reference/Learner.html" class="external-link">Learner</a></code> properties when given. <code>"ignore"</code> and <code>"ignore!"</code> therefore
behave completely identically, <code>"ignore!"</code> is only present for consistency.<br>
When <code>ordered</code> features are converted to <code>factor</code>, then they are treated like <code>factor</code> features further down in the pipeline,
and are possibly eventually converted to <code>numeric</code>s, but in a different way: <code>factor</code>s get one-hot encoded, <code>ordered_action</code> = <code>"numeric"</code>
converts ordered using <code>as.numeric</code> to their integer-valued rank.</p></dd>


<dt>character_action</dt>
<dd><p><code>character(1)</code><br>
How to handle <code>character</code> columns: <code>"factor"</code> (default) or <code>"factor!"</code>: convert to <code>factor</code> columns;
<code>"matrix"</code> or <code>"matrix!"</code>: Use <code><a href="mlr_pipeops_textvectorizer.html">PipeOpTextVectorizer</a></code>. <code>"ignore"</code> or <code>"ignore!"</code>: ignore.
When <code>task</code> is given and has no <code>character</code> columns, or when <code>learner</code> is given and can handle <code>character</code>, then
<code>"factor"</code> and <code>"matrix"</code> are treated like <code>"ignore"</code>. This means it is necessary to add the exclamation point to
override <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> or <code><a href="https://mlr3.mlr-org.com/reference/Learner.html" class="external-link">Learner</a></code> properties when given. <code>"ignore"</code> and <code>"ignore!"</code> therefore
behave completely identically, <code>"ignore!"</code> is only present for consistency.<br>
When <code>character</code> columns are converted to <code>factor</code>, then they are treated like <code>factor</code> further down in the pipeline,
and are possibly eventually converted to <code>numeric</code>s, using one-hot encoding.</p></dd>


<dt>POSIXct_action</dt>
<dd><p><code>character(1)</code><br>
How to handle <code>POSIXct</code> columns: <code>"numeric"</code> (default) or <code>"numeric!"</code>: convert to <code>numeric</code> columns;
<code>"datefeatures"</code> or <code>"datefeatures!"</code>: Use <code><a href="mlr_pipeops_datefeatures.html">PipeOpDateFeatures</a></code>. <code>"ignore"</code> or <code>"ignore!"</code>: ignore.
When <code>task</code> is given and has no <code>POSIXct</code> columns, or when <code>learner</code> is given and can handle <code>POSIXct</code>, then
<code>"numeric"</code> and <code>"datefeatures"</code> are treated like <code>"ignore"</code>. This means it is necessary to add the exclamation point to
override <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> or <code><a href="https://mlr3.mlr-org.com/reference/Learner.html" class="external-link">Learner</a></code> properties when given. <code>"ignore"</code> and <code>"ignore!"</code> therefore
behave completely identically, <code>"ignore!"</code> is only present for consistency.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p><code><a href="Graph.html">Graph</a></code></p>


    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mlr3.mlr-org.com" class="external-link">mlr3</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">lrn</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">lrn</a></span><span class="op">(</span><span class="st">"regr.rpart"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">task</span> <span class="op">=</span> <span class="va">mlr_tasks</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="st">"boston_housing"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">gr</span> <span class="op">=</span> <span class="fu">pipeline_robustify</span><span class="op">(</span><span class="va">task</span>, <span class="va">lrn</span><span class="op">)</span> <span class="op"><a href="grapes-greater-than-greater-than-grapes.html">%&gt;&gt;%</a></span> <span class="fu"><a href="po.html">po</a></span><span class="op">(</span><span class="st">"learner"</span>, <span class="va">lrn</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://mlr3.mlr-org.com/reference/resample.html" class="external-link">resample</a></span><span class="op">(</span><span class="va">task</span>, <span class="va"><a href="mlr_learners_graph.html">GraphLearner</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">gr</span><span class="op">)</span>, <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">rsmp</a></span><span class="op">(</span><span class="st">"holdout"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;ResampleResult&gt; with 1 resampling iterations</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         task_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  boston_housing</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                                        learner_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  removeconstants_prerobustify.fixfactors.removeconstants_postrobustify.regr.rpart</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  resampling_id iteration warnings errors</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        holdout         1        0      0</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Martin Binder, Florian Pfisterer, Lennart Schneider, Bernd Bischl, Michel Lang, Susanne Dandl.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

