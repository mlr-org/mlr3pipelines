<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Out of Range Imputation — mlr_pipeops_imputeoor • mlr3pipelines</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.10/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.10/font.css" rel="stylesheet"><link href="../deps/Roboto_Slab-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Out of Range Imputation — mlr_pipeops_imputeoor"><meta name="description" content="Impute factorial features by adding a new level &quot;.MISSING&quot;.
Impute numerical features by constant values shifted below the minimum or above the maximum by
using \(min(x) - offset - multiplier * diff(range(x))\) or
\(max(x) + offset + multiplier * diff(range(x))\).
This type of imputation is especially sensible in the context of tree-based methods, see also
Ding &amp;amp; Simonoff (2010).
expect input  to have the same factor (or ordered) levels during
training as well as prediction. This PipeOp modifies the levels of factor and ordered features,
and since it may occur that a factor or ordered feature contains missing values only during prediction, but not
during training, the output Task could also have different levels during the two stages.
To avoid problems with the Learners' expectation, controlling the PipeOps' handling of this edge-case is necessary.
For this, use the create_empty_level hyperparameter inherited from PipeOpImpute.
If create_empty_level is set to TRUE, then an unseen level &quot;.MISSING&quot; is added to the feature during
training and missing values are imputed as &quot;.MISSING&quot; during prediction.
However, empty factor levels during training can be a problem for many Learners.
If create_empty_level is set to FALSE, then no empty level is introduced during training, but columns that
have missing values only during prediction will not be imputed. This is why it may still be necessary to use
po(&quot;imputesample&quot;, affect_columns = selector_type(types = c(&quot;factor&quot;, &quot;ordered&quot;)))
(or another imputation method) after this imputation method.
Note that setting create_empty_level to FALSE is the same as setting it to TRUE and using PipeOpFixFactors
after this PipeOp."><meta property="og:description" content="Impute factorial features by adding a new level &quot;.MISSING&quot;.
Impute numerical features by constant values shifted below the minimum or above the maximum by
using \(min(x) - offset - multiplier * diff(range(x))\) or
\(max(x) + offset + multiplier * diff(range(x))\).
This type of imputation is especially sensible in the context of tree-based methods, see also
Ding &amp;amp; Simonoff (2010).
expect input  to have the same factor (or ordered) levels during
training as well as prediction. This PipeOp modifies the levels of factor and ordered features,
and since it may occur that a factor or ordered feature contains missing values only during prediction, but not
during training, the output Task could also have different levels during the two stages.
To avoid problems with the Learners' expectation, controlling the PipeOps' handling of this edge-case is necessary.
For this, use the create_empty_level hyperparameter inherited from PipeOpImpute.
If create_empty_level is set to TRUE, then an unseen level &quot;.MISSING&quot; is added to the feature during
training and missing values are imputed as &quot;.MISSING&quot; during prediction.
However, empty factor levels during training can be a problem for many Learners.
If create_empty_level is set to FALSE, then no empty level is introduced during training, but columns that
have missing values only during prediction will not be imputed. This is why it may still be necessary to use
po(&quot;imputesample&quot;, affect_columns = selector_type(types = c(&quot;factor&quot;, &quot;ordered&quot;)))
(or another imputation method) after this imputation method.
Note that setting create_empty_level to FALSE is the same as setting it to TRUE and using PipeOpFixFactors
after this PipeOp."><meta property="og:image" content="https://mlr3pipelines.mlr-org.com/logo.png"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mlr3pipelines</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.8.0-9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fa-file-alt"></span> Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/extending.html">Adding new PipeOps</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://mlr3book.mlr-org.com"><span class="fa fa-link"></span> mlr3book</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mlr-org/mlr3pipelines/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://lmmisld-lmu-stats-slds.srv.mwn.de/mlr_invite/" aria-label="Mattermost chat"><span class="fa fa-comments"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://stackoverflow.com/questions/tagged/mlr3" aria-label="Stack Overflow"><span class="fa fab fa-stack-overflow"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://mlr-org.com/" aria-label="RSS"><span class="fa fa-rss"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Out of Range Imputation</h1>
      <small class="dont-index">Source: <a href="https://github.com/mlr-org/mlr3pipelines/blob/master/R/PipeOpImputeOOR.R" class="external-link"><code>R/PipeOpImputeOOR.R</code></a></small>
      <div class="d-none name"><code>mlr_pipeops_imputeoor.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Impute factorial features by adding a new level <code>".MISSING"</code>.</p>
<p>Impute numerical features by constant values shifted below the minimum or above the maximum by
using \(min(x) - offset - multiplier * diff(range(x))\) or
\(max(x) + offset + multiplier * diff(range(x))\).</p>
<p>This type of imputation is especially sensible in the context of tree-based methods, see also
Ding &amp; Simonoff (2010).</p>
<p>expect input  to have the same <code>factor</code> (or <code>ordered</code>) levels during
training as well as prediction. This <code>PipeOp</code> modifies the levels of <code>factor</code> and <code>ordered</code> features,
and since it may occur that a <code>factor</code> or <code>ordered</code> feature contains missing values only during prediction, but not
during training, the output <code>Task</code> could also have different levels during the two stages.</p>
<p>To avoid problems with the <code>Learner</code>s' expectation, controlling the <code>PipeOp</code>s' handling of this edge-case is necessary.
For this, use the <code>create_empty_level</code> hyperparameter inherited from <code><a href="PipeOpImpute.html">PipeOpImpute</a></code>.<br>
If <code>create_empty_level</code> is set to <code>TRUE</code>, then an unseen level <code>".MISSING"</code> is added to the feature during
training and missing values are imputed as <code>".MISSING"</code> during prediction.
However, empty factor levels during training can be a problem for many <code><a href="https://mlr3.mlr-org.com/reference/Learner.html" class="external-link">Learners</a></code>.<br>
If <code>create_empty_level</code> is set to <code>FALSE</code>, then no empty level is introduced during training, but columns that
have missing values only during prediction will <em>not</em> be imputed. This is why it may still be necessary to use
<code><a href="mlr_pipeops_imputesample.html">po("imputesample", affect_columns = selector_type(types = c("factor", "ordered")))</a></code>
(or another imputation method) after this imputation method.
Note that setting <code>create_empty_level</code> to <code>FALSE</code> is the same as setting it to <code>TRUE</code> and using <code><a href="mlr_pipeops_fixfactors.html">PipeOpFixFactors</a></code>
after this <code>PipeOp</code>.</p>
    </div>


    <div class="section level2">
    <h2 id="format">Format<a class="anchor" aria-label="anchor" href="#format"></a></h2>
    <p><code><a href="https://r6.r-lib.org/reference/R6Class.html" class="external-link">R6Class</a></code> object inheriting from <code><a href="PipeOpImpute.html">PipeOpImpute</a></code>/<code><a href="PipeOp.html">PipeOp</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="construction">Construction<a class="anchor" aria-label="anchor" href="#construction"></a></h2>



<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>PipeOpImputeOOR<span class="sc">$</span><span class="fu">new</span>(<span class="at">id =</span> <span class="st">"imputeoor"</span>, <span class="at">param_vals =</span> <span class="fu">list</span>())</span></code></pre><p></p></div><ul><li><p><code>id</code> :: <code>character(1)</code><br>
Identifier of resulting object, default <code>"imputeoor"</code>.</p></li>
<li><p><code>param_vals</code> :: named <code>list</code><br>
List of hyperparameter settings, overwriting the hyperparameter settings that would otherwise be set during construction. Default <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="input-and-output-channels">Input and Output Channels<a class="anchor" aria-label="anchor" href="#input-and-output-channels"></a></h2>


<p>Input and output channels are inherited from <code><a href="PipeOpImpute.html">PipeOpImpute</a></code>.</p>
<p>The output is the input <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> with all affected features having missing values imputed as described above.</p>
    </div>
    <div class="section level2">
    <h2 id="state">State<a class="anchor" aria-label="anchor" href="#state"></a></h2>


<p>The <code>$state</code> is a named <code>list</code> with the <code>$state</code> elements inherited from <code><a href="PipeOpImpute.html">PipeOpImpute</a></code>.</p>
<p>The <code>$state$model</code> contains either <code>".MISSING"</code> used for <code>character</code> and <code>factor</code> (also
<code>ordered</code>) features or <code>numeric(1)</code> indicating the constant value used for imputation of
<code>integer</code> and <code>numeric</code> features.</p>
    </div>
    <div class="section level2">
    <h2 id="parameters">Parameters<a class="anchor" aria-label="anchor" href="#parameters"></a></h2>


<p>The parameters are the parameters inherited from <code><a href="PipeOpImpute.html">PipeOpImpute</a></code>, as well as:</p><ul><li><p><code>min</code> :: <code>logical(1)</code> <br>
Should <code>integer</code> and <code>numeric</code> features be shifted below the minimum? Initialized to <code>TRUE</code>. If <code>FALSE</code>
they are shifted above the maximum. See also the description above.</p></li>
<li><p><code>offset</code> :: <code>numeric(1)</code> <br>
Numerical non-negative offset as used in the description above for <code>integer</code> and <code>numeric</code>
features. Initialized to <code>1</code>.</p></li>
<li><p><code>multiplier</code> :: <code>numeric(1)</code> <br>
Numerical non-negative multiplier as used in the description above for <code>integer</code> and <code>numeric</code>
features. Initialized to <code>1</code>.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="internals">Internals<a class="anchor" aria-label="anchor" href="#internals"></a></h2>


<p>Adds an explicit new <code>level()</code> to <code>factor</code> and <code>ordered</code> features, but not to <code>character</code> features.
For <code>integer</code> and <code>numeric</code> features uses the <code>min</code>, <code>max</code>, <code>diff</code> and <code>range</code> functions.
<code>integer</code> and <code>numeric</code> features that are entirely <code>NA</code> are imputed as <code>0</code>. <code>factor</code> and <code>ordered</code> features that are
entirely <code>NA</code> are imputed as <code>".MISSING"</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="fields">Fields<a class="anchor" aria-label="anchor" href="#fields"></a></h2>


<p>Only fields inherited from <code><a href="PipeOp.html">PipeOp</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>


<p>Only methods inherited from <code><a href="PipeOpImpute.html">PipeOpImpute</a></code>/<code><a href="PipeOp.html">PipeOp</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Ding Y, Simonoff JS (2010).
“An Investigation of Missing Data Methods for Classification Trees Applied to Binary Response Data.”
<em>Journal of Machine Learning Research</em>, <b>11</b>(6), 131-170.
<a href="https://jmlr.org/papers/v11/ding10a.html" class="external-link">https://jmlr.org/papers/v11/ding10a.html</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>https://mlr-org.com/pipeops.html</p>
<p>Other PipeOps:
<code><a href="PipeOp.html">PipeOp</a></code>,
<code><a href="PipeOpEncodePL.html">PipeOpEncodePL</a></code>,
<code><a href="PipeOpEnsemble.html">PipeOpEnsemble</a></code>,
<code><a href="PipeOpImpute.html">PipeOpImpute</a></code>,
<code><a href="PipeOpTargetTrafo.html">PipeOpTargetTrafo</a></code>,
<code><a href="PipeOpTaskPreproc.html">PipeOpTaskPreproc</a></code>,
<code><a href="PipeOpTaskPreprocSimple.html">PipeOpTaskPreprocSimple</a></code>,
<code><a href="mlr_pipeops.html">mlr_pipeops</a></code>,
<code><a href="mlr_pipeops_adas.html">mlr_pipeops_adas</a></code>,
<code><a href="mlr_pipeops_blsmote.html">mlr_pipeops_blsmote</a></code>,
<code><a href="mlr_pipeops_boxcox.html">mlr_pipeops_boxcox</a></code>,
<code><a href="mlr_pipeops_branch.html">mlr_pipeops_branch</a></code>,
<code><a href="mlr_pipeops_chunk.html">mlr_pipeops_chunk</a></code>,
<code><a href="mlr_pipeops_classbalancing.html">mlr_pipeops_classbalancing</a></code>,
<code><a href="mlr_pipeops_classifavg.html">mlr_pipeops_classifavg</a></code>,
<code><a href="mlr_pipeops_classweights.html">mlr_pipeops_classweights</a></code>,
<code><a href="mlr_pipeops_colapply.html">mlr_pipeops_colapply</a></code>,
<code><a href="mlr_pipeops_collapsefactors.html">mlr_pipeops_collapsefactors</a></code>,
<code><a href="mlr_pipeops_colroles.html">mlr_pipeops_colroles</a></code>,
<code><a href="mlr_pipeops_copy.html">mlr_pipeops_copy</a></code>,
<code><a href="mlr_pipeops_datefeatures.html">mlr_pipeops_datefeatures</a></code>,
<code><a href="mlr_pipeops_decode.html">mlr_pipeops_decode</a></code>,
<code><a href="mlr_pipeops_encode.html">mlr_pipeops_encode</a></code>,
<code><a href="mlr_pipeops_encodeimpact.html">mlr_pipeops_encodeimpact</a></code>,
<code><a href="mlr_pipeops_encodelmer.html">mlr_pipeops_encodelmer</a></code>,
<code><a href="mlr_pipeops_encodeplquantiles.html">mlr_pipeops_encodeplquantiles</a></code>,
<code><a href="mlr_pipeops_encodepltree.html">mlr_pipeops_encodepltree</a></code>,
<code><a href="mlr_pipeops_featureunion.html">mlr_pipeops_featureunion</a></code>,
<code><a href="mlr_pipeops_filter.html">mlr_pipeops_filter</a></code>,
<code><a href="mlr_pipeops_fixfactors.html">mlr_pipeops_fixfactors</a></code>,
<code><a href="mlr_pipeops_histbin.html">mlr_pipeops_histbin</a></code>,
<code><a href="mlr_pipeops_ica.html">mlr_pipeops_ica</a></code>,
<code><a href="mlr_pipeops_imputeconstant.html">mlr_pipeops_imputeconstant</a></code>,
<code><a href="mlr_pipeops_imputehist.html">mlr_pipeops_imputehist</a></code>,
<code><a href="mlr_pipeops_imputelearner.html">mlr_pipeops_imputelearner</a></code>,
<code><a href="mlr_pipeops_imputemean.html">mlr_pipeops_imputemean</a></code>,
<code><a href="mlr_pipeops_imputemedian.html">mlr_pipeops_imputemedian</a></code>,
<code><a href="mlr_pipeops_imputemode.html">mlr_pipeops_imputemode</a></code>,
<code><a href="mlr_pipeops_imputesample.html">mlr_pipeops_imputesample</a></code>,
<code><a href="mlr_pipeops_kernelpca.html">mlr_pipeops_kernelpca</a></code>,
<code><a href="mlr_pipeops_learner.html">mlr_pipeops_learner</a></code>,
<code><a href="mlr_pipeops_learner_pi_cvplus.html">mlr_pipeops_learner_pi_cvplus</a></code>,
<code><a href="mlr_pipeops_learner_quantiles.html">mlr_pipeops_learner_quantiles</a></code>,
<code><a href="mlr_pipeops_missind.html">mlr_pipeops_missind</a></code>,
<code><a href="mlr_pipeops_modelmatrix.html">mlr_pipeops_modelmatrix</a></code>,
<code><a href="mlr_pipeops_multiplicityexply.html">mlr_pipeops_multiplicityexply</a></code>,
<code><a href="mlr_pipeops_multiplicityimply.html">mlr_pipeops_multiplicityimply</a></code>,
<code><a href="mlr_pipeops_mutate.html">mlr_pipeops_mutate</a></code>,
<code><a href="mlr_pipeops_nearmiss.html">mlr_pipeops_nearmiss</a></code>,
<code><a href="mlr_pipeops_nmf.html">mlr_pipeops_nmf</a></code>,
<code><a href="mlr_pipeops_nop.html">mlr_pipeops_nop</a></code>,
<code><a href="mlr_pipeops_ovrsplit.html">mlr_pipeops_ovrsplit</a></code>,
<code><a href="mlr_pipeops_ovrunite.html">mlr_pipeops_ovrunite</a></code>,
<code><a href="mlr_pipeops_pca.html">mlr_pipeops_pca</a></code>,
<code><a href="mlr_pipeops_proxy.html">mlr_pipeops_proxy</a></code>,
<code><a href="mlr_pipeops_quantilebin.html">mlr_pipeops_quantilebin</a></code>,
<code><a href="mlr_pipeops_randomprojection.html">mlr_pipeops_randomprojection</a></code>,
<code><a href="mlr_pipeops_randomresponse.html">mlr_pipeops_randomresponse</a></code>,
<code><a href="mlr_pipeops_regravg.html">mlr_pipeops_regravg</a></code>,
<code><a href="mlr_pipeops_removeconstants.html">mlr_pipeops_removeconstants</a></code>,
<code><a href="mlr_pipeops_renamecolumns.html">mlr_pipeops_renamecolumns</a></code>,
<code><a href="mlr_pipeops_replicate.html">mlr_pipeops_replicate</a></code>,
<code><a href="mlr_pipeops_rowapply.html">mlr_pipeops_rowapply</a></code>,
<code><a href="mlr_pipeops_scale.html">mlr_pipeops_scale</a></code>,
<code><a href="mlr_pipeops_scalemaxabs.html">mlr_pipeops_scalemaxabs</a></code>,
<code><a href="mlr_pipeops_scalerange.html">mlr_pipeops_scalerange</a></code>,
<code><a href="mlr_pipeops_select.html">mlr_pipeops_select</a></code>,
<code><a href="mlr_pipeops_smote.html">mlr_pipeops_smote</a></code>,
<code><a href="mlr_pipeops_smotenc.html">mlr_pipeops_smotenc</a></code>,
<code><a href="mlr_pipeops_spatialsign.html">mlr_pipeops_spatialsign</a></code>,
<code><a href="mlr_pipeops_subsample.html">mlr_pipeops_subsample</a></code>,
<code><a href="mlr_pipeops_targetinvert.html">mlr_pipeops_targetinvert</a></code>,
<code><a href="mlr_pipeops_targetmutate.html">mlr_pipeops_targetmutate</a></code>,
<code><a href="mlr_pipeops_targettrafoscalerange.html">mlr_pipeops_targettrafoscalerange</a></code>,
<code><a href="mlr_pipeops_textvectorizer.html">mlr_pipeops_textvectorizer</a></code>,
<code><a href="mlr_pipeops_threshold.html">mlr_pipeops_threshold</a></code>,
<code><a href="mlr_pipeops_tomek.html">mlr_pipeops_tomek</a></code>,
<code><a href="mlr_pipeops_tunethreshold.html">mlr_pipeops_tunethreshold</a></code>,
<code><a href="mlr_pipeops_unbranch.html">mlr_pipeops_unbranch</a></code>,
<code><a href="mlr_pipeops_updatetarget.html">mlr_pipeops_updatetarget</a></code>,
<code><a href="mlr_pipeops_vtreat.html">mlr_pipeops_vtreat</a></code>,
<code><a href="mlr_pipeops_yeojohnson.html">mlr_pipeops_yeojohnson</a></code></p>
<p>Other Imputation PipeOps:
<code><a href="PipeOpImpute.html">PipeOpImpute</a></code>,
<code><a href="mlr_pipeops_imputeconstant.html">mlr_pipeops_imputeconstant</a></code>,
<code><a href="mlr_pipeops_imputehist.html">mlr_pipeops_imputehist</a></code>,
<code><a href="mlr_pipeops_imputelearner.html">mlr_pipeops_imputelearner</a></code>,
<code><a href="mlr_pipeops_imputemean.html">mlr_pipeops_imputemean</a></code>,
<code><a href="mlr_pipeops_imputemedian.html">mlr_pipeops_imputemedian</a></code>,
<code><a href="mlr_pipeops_imputemode.html">mlr_pipeops_imputemode</a></code>,
<code><a href="mlr_pipeops_imputesample.html">mlr_pipeops_imputesample</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://mlr3.mlr-org.com" class="external-link">"mlr3"</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">2409</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">tsk</a></span><span class="op">(</span><span class="st">"pima"</span><span class="op">)</span><span class="op">$</span><span class="fu">data</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data</span><span class="op">$</span><span class="va">y</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">letters</span>, size <span class="op">=</span> <span class="fl">766</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data</span><span class="op">$</span><span class="va">z</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">ordered</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, size <span class="op">=</span> <span class="fl">767</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">task</span> <span class="op">=</span> <span class="va"><a href="https://mlr3.mlr-org.com/reference/TaskClassif.html" class="external-link">TaskClassif</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="st">"task"</span>, backend <span class="op">=</span> <span class="va">data</span>, target <span class="op">=</span> <span class="st">"diabetes"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">task</span><span class="op">$</span><span class="fu">missings</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> diabetes      age  glucose  insulin     mass pedigree pregnant pressure </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        0        0        5      374       11        0        0       35 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  triceps        y        z </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      227        2        1 </span>
<span class="r-in"><span><span class="va">po</span> <span class="op">=</span> <span class="fu"><a href="po.html">po</a></span><span class="op">(</span><span class="st">"imputeoor"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">new_task</span> <span class="op">=</span> <span class="va">po</span><span class="op">$</span><span class="fu">train</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>task <span class="op">=</span> <span class="va">task</span><span class="op">)</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">new_task</span><span class="op">$</span><span class="fu">missings</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> diabetes      age pedigree pregnant  glucose  insulin     mass pressure </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        0        0        0        0        0        0        0        0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  triceps        y        z </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        0        0        0 </span>
<span class="r-in"><span><span class="va">new_task</span><span class="op">$</span><span class="fu">data</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      diabetes   age pedigree pregnant glucose insulin  mass pressure triceps</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        &lt;fctr&gt; &lt;num&gt;    &lt;num&gt;    &lt;num&gt;   &lt;num&gt;   &lt;num&gt; &lt;num&gt;    &lt;num&gt;   &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1:      pos    50    0.627        6     148    -819  33.6       72      35</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2:      neg    31    0.351        1      85    -819  26.6       66      29</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3:      pos    32    0.672        8     183    -819  23.3       64     -86</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4:      neg    21    0.167        1      89      94  28.1       66      23</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5:      pos    33    2.288        0     137     168  43.1       40      35</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ---                                                                        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 764:      neg    63    0.171       10     101     180  32.9       76      48</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 765:      neg    27    0.340        2     122    -819  36.8       70      27</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 766:      neg    30    0.245        5     121     112  26.2       72      23</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 767:      pos    47    0.349        1     126    -819  30.1       60     -86</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 768:      neg    23    0.315        1      93    -819  30.4       70      31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             y        z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        &lt;fctr&gt;    &lt;ord&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1: .MISSING .MISSING</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2:        l        9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3:        q        6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4:        f        3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5:        l        3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ---                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 764:        o        7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 765:        n        5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 766:        e        6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 767:        c        8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 768: .MISSING        9</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># recommended use when missing values are expected during prediction on</span></span></span>
<span class="r-in"><span><span class="co"># factor columns that had no missing values during training</span></span></span>
<span class="r-in"><span><span class="va">gr</span> <span class="op">=</span> <span class="fu"><a href="po.html">po</a></span><span class="op">(</span><span class="st">"imputeoor"</span>, create_empty_level <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op"><a href="grapes-greater-than-greater-than-grapes.html">%&gt;&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="po.html">po</a></span><span class="op">(</span><span class="st">"imputesample"</span>, affect_columns <span class="op">=</span> <span class="fu"><a href="Selector.html">selector_type</a></span><span class="op">(</span>types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"factor"</span>, <span class="st">"ordered"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">t1</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/as_task_classif.html" class="external-link">as_task_classif</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>l <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.ordered</a></span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span>, t <span class="op">=</span> <span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span>, target <span class="op">=</span> <span class="st">"t"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">t2</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/as_task_classif.html" class="external-link">as_task_classif</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>l <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.ordered</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span>, t <span class="op">=</span> <span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span>, target <span class="op">=</span> <span class="st">"t"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">gr</span><span class="op">$</span><span class="fu">train</span><span class="op">(</span><span class="va">t1</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="fu">data</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         t     l</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    &lt;fctr&gt; &lt;ord&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:      a     a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:      b     b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:      c     c</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># missing values during prediction are sampled randomly</span></span></span>
<span class="r-in"><span><span class="va">gr</span><span class="op">$</span><span class="fu">predict</span><span class="op">(</span><span class="va">t2</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="fu">data</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         t     l</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    &lt;fctr&gt; &lt;ord&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:      a     a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:      b  &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:      c  &lt;NA&gt;</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Martin Binder, Florian Pfisterer, Lennart Schneider, Bernd Bischl, Michel Lang, Sebastian Fischer, Susanne Dandl.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

