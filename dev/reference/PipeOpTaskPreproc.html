<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Task Preprocessing Base Class — PipeOpTaskPreproc • mlr3pipelines</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.9/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.9/font.css" rel="stylesheet"><link href="../deps/Roboto_Slab-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="../deps/MathJax-3.2.2/tex-chtml.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Task Preprocessing Base Class — PipeOpTaskPreproc"><meta name="description" content="Base class for handling most &quot;preprocessing&quot; operations. These
are operations that have exactly one Task input and one Task output,
and expect the column layout of these Tasks during input and output
to be the same.
Prediction-behavior of preprocessing operations should always be independent for each row in the input-Task.
This means that the prediction-operation of preprocessing-PipeOps should commute with rbind(): Running prediction
on an n-row Task should result in the same result as rbind()-ing the prediction-result from n
1-row Tasks with the same content. In the large majority of cases, the number and order of rows
should also not be changed during prediction.
Users must implement private$.train_task() and private$.predict_task(), which have a Task
input and should return that Task. The Task should, if possible, be
manipulated in-place, and should not be cloned.
Alternatively, the private$.train_dt() and private$.predict_dt() functions can be implemented, which operate on
data.table objects instead. This should generally only be done if all
data is in some way altered (e.g. PCA changing all columns to principal components) and not if only
a few columns are added or removed (e.g. feature selection) because this should be done at the Task-level
with private$.train_task(). The private$.select_cols() function can be overloaded for private$.train_dt() and private$.predict_dt()
to operate only on subsets of the Task's data, e.g. only on numerical columns.
If the can_subset_cols argument of the constructor is TRUE (the default), then the hyperparameter affect_columns
is added, which can limit the columns of the Task that is modified by the PipeOpTaskPreproc
using a Selector function. Note this functionality is entirely independent of the private$.select_cols() functionality.
PipeOpTaskPreproc is useful for operations that behave differently during training and prediction. For operations
that perform essentially the same operation and only need to perform extra work to build a $state during training,
the PipeOpTaskPreprocSimple class can be used instead."><meta property="og:description" content="Base class for handling most &quot;preprocessing&quot; operations. These
are operations that have exactly one Task input and one Task output,
and expect the column layout of these Tasks during input and output
to be the same.
Prediction-behavior of preprocessing operations should always be independent for each row in the input-Task.
This means that the prediction-operation of preprocessing-PipeOps should commute with rbind(): Running prediction
on an n-row Task should result in the same result as rbind()-ing the prediction-result from n
1-row Tasks with the same content. In the large majority of cases, the number and order of rows
should also not be changed during prediction.
Users must implement private$.train_task() and private$.predict_task(), which have a Task
input and should return that Task. The Task should, if possible, be
manipulated in-place, and should not be cloned.
Alternatively, the private$.train_dt() and private$.predict_dt() functions can be implemented, which operate on
data.table objects instead. This should generally only be done if all
data is in some way altered (e.g. PCA changing all columns to principal components) and not if only
a few columns are added or removed (e.g. feature selection) because this should be done at the Task-level
with private$.train_task(). The private$.select_cols() function can be overloaded for private$.train_dt() and private$.predict_dt()
to operate only on subsets of the Task's data, e.g. only on numerical columns.
If the can_subset_cols argument of the constructor is TRUE (the default), then the hyperparameter affect_columns
is added, which can limit the columns of the Task that is modified by the PipeOpTaskPreproc
using a Selector function. Note this functionality is entirely independent of the private$.select_cols() functionality.
PipeOpTaskPreproc is useful for operations that behave differently during training and prediction. For operations
that perform essentially the same operation and only need to perform extra work to build a $state during training,
the PipeOpTaskPreprocSimple class can be used instead."><meta property="og:image" content="https://mlr3pipelines.mlr-org.com/logo.png"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mlr3pipelines</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.6.0-9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fa-file-alt"></span> Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://mlr3book.mlr-org.com"><span class="fa fa-link"></span> mlr3book</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mlr-org/mlr3pipelines/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://lmmisld-lmu-stats-slds.srv.mwn.de/mlr_invite/"><span class="fa fa-comments"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://stackoverflow.com/questions/tagged/mlr3"><span class="fa fab fa-stack-overflow"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://mlr-org.com/"><span class="fa fa-rss"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Task Preprocessing Base Class</h1>
      <small class="dont-index">Source: <a href="https://github.com/mlr-org/mlr3pipelines/blob/master/R/PipeOpTaskPreproc.R" class="external-link"><code>R/PipeOpTaskPreproc.R</code></a></small>
      <div class="d-none name"><code>PipeOpTaskPreproc.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Base class for handling most "preprocessing" operations. These
are operations that have exactly one <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> input and one <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> output,
and expect the column layout of these <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code>s during input and output
to be the same.</p>
<p>Prediction-behavior of preprocessing operations should always be independent for each row in the input-<code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code>.
This means that the prediction-operation of preprocessing-<code><a href="PipeOp.html">PipeOp</a></code>s should commute with <code><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind()</a></code>: Running prediction
on an <code>n</code>-row <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> should result in the same result as <code><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind()</a></code>-ing the prediction-result from <code>n</code>
1-row <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code>s with the same content. In the large majority of cases, the number and order of rows
should also not be changed during prediction.</p>
<p>Users must implement <code>private$.train_task()</code> and <code>private$.predict_task()</code>, which have a <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code>
input and should return that <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code>. The <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> should, if possible, be
manipulated in-place, and should not be cloned.</p>
<p>Alternatively, the <code>private$.train_dt()</code> and <code>private$.predict_dt()</code> functions can be implemented, which operate on
<code><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></code> objects instead. This should generally only be done if all
data is in some way altered (e.g. PCA changing all columns to principal components) and not if only
a few columns are added or removed (e.g. feature selection) because this should be done at the <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code>-level
with <code>private$.train_task()</code>. The <code>private$.select_cols()</code> function can be overloaded for <code>private$.train_dt()</code> and <code>private$.predict_dt()</code>
to operate only on subsets of the <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code>'s data, e.g. only on numerical columns.</p>
<p>If the <code>can_subset_cols</code> argument of the constructor is <code>TRUE</code> (the default), then the hyperparameter <code>affect_columns</code>
is added, which can limit the columns of the <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> that is modified by the <code>PipeOpTaskPreproc</code>
using a <code><a href="Selector.html">Selector</a></code> function. Note this functionality is entirely independent of the <code>private$.select_cols()</code> functionality.</p>
<p><code>PipeOpTaskPreproc</code> is useful for operations that behave differently during training and prediction. For operations
that perform essentially the same operation and only need to perform extra work to build a <code>$state</code> during training,
the <code><a href="PipeOpTaskPreprocSimple.html">PipeOpTaskPreprocSimple</a></code> class can be used instead.</p>
    </div>


    <div class="section level2">
    <h2 id="format">Format<a class="anchor" aria-label="anchor" href="#format"></a></h2>
    <p>Abstract <code><a href="https://r6.r-lib.org/reference/R6Class.html" class="external-link">R6Class</a></code> inheriting from <code><a href="PipeOp.html">PipeOp</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="construction">Construction<a class="anchor" aria-label="anchor" href="#construction"></a></h2>



<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>PipeOpTaskPreproc<span class="sc">$</span><span class="fu">new</span>(id, <span class="at">param_set =</span> <span class="fu">ps</span>(), <span class="at">param_vals =</span> <span class="fu">list</span>(), <span class="at">can_subset_cols =</span> <span class="cn">TRUE</span>,</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>  <span class="at">packages =</span> <span class="fu">character</span>(<span class="dv">0</span>), <span class="at">task_type =</span> <span class="st">"Task"</span>, <span class="at">tags =</span> <span class="cn">NULL</span>, <span class="at">feature_types =</span> mlr_reflections<span class="sc">$</span>task_feature_types)</span></code></pre><p></p></div><ul><li><p><code>id</code> :: <code>character(1)</code><br>
Identifier of resulting object. See <code>$id</code> slot of <code><a href="PipeOp.html">PipeOp</a></code>.</p></li>
<li><p><code>param_set</code> :: <code><a href="https://paradox.mlr-org.com/reference/ParamSet.html" class="external-link">ParamSet</a></code><br>
Parameter space description. This should be created by the subclass and given to <code>super$initialize()</code>.</p></li>
<li><p><code>param_vals</code> :: named <code>list</code><br>
List of hyperparameter settings, overwriting the hyperparameter settings given in <code>param_set</code>. The
subclass should have its own <code>param_vals</code> parameter and pass it on to <code>super$initialize()</code>. Default <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>.</p></li>
<li><p><code>can_subset_cols</code> :: <code>logical(1)</code><br>
Whether the <code>affect_columns</code> parameter should be added which lets the user limit the columns that are
modified by the <code>PipeOpTaskPreproc</code>. This should generally be <code>FALSE</code> if the operation adds or removes
rows from the <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code>, and <code>TRUE</code> otherwise. Default is <code>TRUE</code>.</p></li>
<li><p>packages :: <code>character</code><br>
Set of all required packages for the <code><a href="PipeOp.html">PipeOp</a></code>'s <code>private$.train()</code> and <code>private$.predict()</code> methods. See <code>$packages</code> slot.
Default is <code>character(0)</code>.</p></li>
<li><p><code>task_type</code> :: <code>character(1)</code><br>
The class of <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> that should be accepted as input and will be returned as output. This
should generally be a <code>character(1)</code> identifying a type of <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code>, e.g. <code>"Task"</code>, <code>"TaskClassif"</code> or
<code>"TaskRegr"</code> (or another subclass introduced by other packages). Default is <code>"Task"</code>.</p></li>
<li><p>tags :: <code>character</code> | <code>NULL</code><br>
Tags of the resulting <code>PipeOp</code>. This is added to the tag <code>"data transform"</code>. Default <code>NULL</code>.</p></li>
<li><p><code>feature_types</code> :: <code>character</code><br>
Feature types affected by the <code>PipeOp</code>. See <code>private$.select_cols()</code> for more information.
Defaults to all available feature types.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="input-and-output-channels">Input and Output Channels<a class="anchor" aria-label="anchor" href="#input-and-output-channels"></a></h2>


<p><code>PipeOpTaskPreproc</code> has one input channel named <code>"input"</code>, taking a <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code>, or a subclass of
<code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> if the <code>task_type</code> construction argument is given as such; both during training and prediction.</p>
<p><code>PipeOpTaskPreproc</code> has one output channel named <code>"output"</code>, producing a <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code>, or a subclass;
the <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> type is the same as for input; both during training and prediction.</p>
<p>The output <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> is the modified input <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> according to the overloaded
<code>private$.train_task()</code>/<code>private$.predict_taks()</code> or <code>private$.train_dt()</code>/<code>private$.predict_dt()</code> functions.</p>
    </div>
    <div class="section level2">
    <h2 id="state">State<a class="anchor" aria-label="anchor" href="#state"></a></h2>


<p>The <code>$state</code> is a named <code>list</code>; besides members added by inheriting classes, the members are:</p><ul><li><p><code>affect_cols</code> :: <code>character</code><br>
Names of features being selected by the <code>affect_columns</code> parameter, if present; names of <em>all</em> present features otherwise.</p></li>
<li><p><code>intasklayout</code> :: <code><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></code><br>
Copy of the training <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code>'s <code>$feature_types</code> slot. This is used during prediction to ensure that
the prediction <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> has the same features, feature layout, and feature types as during training.</p></li>
<li><p><code>outtasklayout</code> :: <code><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></code><br>
Copy of the trained <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code>'s <code>$feature_types</code> slot. This is used during prediction to ensure that
the <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> resulting from the prediction operation has the same features, feature layout, and feature types as after training.</p></li>
<li><p><code>dt_columns</code> :: <code>character</code><br>
Names of features selected by the <code>private$.select_cols()</code> call during training. This is only present if the <code>private$.train_dt()</code> functionality is used,
and not present if the <code>private$.train_task()</code> function is overloaded instead.</p></li>
<li><p><code>feature_types</code> :: <code>character</code><br>
Feature types affected by the <code>PipeOp</code>. See <code>private$.select_cols()</code> for more information.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="parameters">Parameters<a class="anchor" aria-label="anchor" href="#parameters"></a></h2>


<ul><li><p><code>affect_columns</code> :: <code>function</code> | <code><a href="Selector.html">Selector</a></code> | <code>NULL</code> <br>
What columns the <code>PipeOpTaskPreproc</code> should operate on. This parameter is only present if the constructor is called with
the <code>can_subset_cols</code> argument set to <code>TRUE</code> (the default).<br>
The parameter must be a <code><a href="Selector.html">Selector</a></code> function, which takes a <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> as argument and returns a <code>character</code>
of features to use.<br>
See <code><a href="Selector.html">Selector</a></code> for example functions. Defaults to <code>NULL</code>, which selects all features.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="internals">Internals<a class="anchor" aria-label="anchor" href="#internals"></a></h2>


<p><code>PipeOpTaskPreproc</code> is an abstract class inheriting from <code><a href="PipeOp.html">PipeOp</a></code>. It implements the <code>private$.train()</code> and
<code>$.predict()</code> functions. These functions perform checks and go on to call <code>private$.train_task()</code> and <code>private$.predict_task()</code>.
A subclass of <code>PipeOpTaskPreproc</code> may implement these functions, or implement <code>private$.train_dt()</code> and <code>private$.predict_dt()</code> instead.
This works by having the default implementations of <code>private$.train_task()</code> and <code>private$.predict_task()</code> call <code>private$.train_dt()</code> and <code>private$.predict_dt()</code>,
respectively.</p>
<p>The <code>affect_columns</code> functionality works by unsetting columns by removing their "col_role" before
processing, and adding them afterwards by setting the col_role to <code>"feature"</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="fields">Fields<a class="anchor" aria-label="anchor" href="#fields"></a></h2>


<p>Fields inherited from <code><a href="PipeOp.html">PipeOp</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>


<p>Methods inherited from <code><a href="PipeOp.html">PipeOp</a></code>, as well as:</p><ul><li><p><code>.train_task</code><br>
(<code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code>) -&gt; <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code><br>
Called by the <code>PipeOpTaskPreproc</code>'s implementation of <code>private$.train()</code>. Takes a single <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> as input
and modifies it (ideally in-place without cloning) while storing information in the <code>$state</code> slot. Note that unlike
<code>$.train()</code>, the argument is <em>not</em> a list but a singular <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code>, and the return object is also <em>not</em> a list but
a singular <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code>. Also, contrary to <code>private$.train()</code>, the <code>$state</code> being generated must be a <code>list</code>, which
the <code>PipeOpTaskPreproc</code> will add additional slots to (see Section <em>State</em>). Care should be taken to avoid name collisions between
<code>$state</code> elements added by <code>private$.train_task()</code> and <code>PipeOpTaskPreproc</code>.<br>
By default this function calls the <code>private$.train_dt()</code> function, but it can be overloaded to perform operations on the <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code>
directly.</p></li>
<li><p><code>.predict_task</code><br>
(<code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code>) -&gt; <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code><br>
Called by the <code>PipeOpTaskPreproc</code>'s implementation of <code>$.predict()</code>. Takes a single <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> as input
and modifies it (ideally in-place without cloning) while using information in the <code>$state</code> slot. Works analogously to
<code>private$.train_task()</code>. If <code>private$.predict_task()</code> should only be overloaded if <code>private$.train_task()</code> is overloaded (i.e. <code>private$.train_dt()</code> is <em>not</em> used).</p></li>
<li><p><code>.train_dt(dt, levels, target)</code> <br>
(<code><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></code>, named <code>list</code>, <code>any</code>) -&gt; <code><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></code> | <code>data.frame</code> | <code>matrix</code> <br>
Train <code>PipeOpTaskPreproc</code> on <code>dt</code>, transform it and store a state in <code>$state</code>. A transformed object must be returned
that can be converted to a <code>data.table</code> using <code><a href="https://rdatatable.gitlab.io/data.table/reference/as.data.table.html" class="external-link">as.data.table</a></code>. <code>dt</code> does not need to be copied deliberately, it
is possible and encouraged to change it in-place.<br>
The <code>levels</code> argument is a named list of factor levels for factorial or character features.
If the input <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> inherits from <code><a href="https://mlr3.mlr-org.com/reference/TaskSupervised.html" class="external-link">TaskSupervised</a></code>, the <code>target</code> argument
contains the <code>$truth()</code> information of the training <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code>; its type depends on the <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code>
type being trained on.<br>
This method can be overloaded when inheriting from <code>PipeOpTaskPreproc</code>, together with <code>private$.predict_dt()</code> and optionally
<code>private$.select_cols()</code>; alternatively, <code>private$.train_task()</code> and <code>private$.predict_task()</code> can be overloaded.</p></li>
<li><p><code>.predict_dt(dt, levels)</code> <br>
(<code><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></code>, named <code>list</code>) -&gt; <code><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></code> | <code>data.frame</code> | <code>matrix</code> <br>
Predict on new data in <code>dt</code>, possibly using the stored <code>$state</code>. A transformed object must be returned
that can be converted to a <code>data.table</code> using <code><a href="https://rdatatable.gitlab.io/data.table/reference/as.data.table.html" class="external-link">as.data.table</a></code>. <code>dt</code> does not need to be copied deliberately, it
is possible and encouraged to change it in-place.<br>
The <code>levels</code> argument is a named list of factor levels for factorial or character features.<br>
This method can be overloaded when inheriting <code>PipeOpTaskPreproc</code>, together with <code>private$.train_dt()</code> and optionally
<code>private$.select_cols()</code>; alternatively, <code>private$.train_task()</code> and <code>private$.predict_task()</code> can be overloaded.</p></li>
<li><p><code>.select_cols(task)</code> <br>
(<code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code>) -&gt; <code>character</code> <br>
Selects which columns the <code><a href="PipeOp.html">PipeOp</a></code> operates on, if <code>private$.train_dt()</code> and <code>private$.predict_dt()</code> are overloaded. This function
is not called if <code>private$.train_task()</code> and <code>private$.predict_task()</code> are overloaded. In contrast to
the <code>affect_columns</code> parameter. <code>private$.select_cols()</code> is for the <em>inheriting class</em> to determine which columns
the operator should function on, e.g. based on feature type, while <code>affect_columns</code> is a way for the <em>user</em>
to limit the columns that a <code>PipeOpTaskPreproc</code> should operate on.<br>
This method can optionally be overloaded when inheriting <code>PipeOpTaskPreproc</code>, together with <code>private$.train_dt()</code> and
<code>private$.predict_dt()</code>; alternatively, <code>private$.train_task()</code> and <code>private$.predict_task()</code> can be overloaded.<br>
If this method is not overloaded, it defaults to selecting of type indicated by the <code>feature_types</code> construction argument.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>https://mlr-org.com/pipeops.html</p>
<p>Other mlr3pipelines backend related:
<code><a href="Graph.html">Graph</a></code>,
<code><a href="PipeOp.html">PipeOp</a></code>,
<code><a href="PipeOpTargetTrafo.html">PipeOpTargetTrafo</a></code>,
<code><a href="PipeOpTaskPreprocSimple.html">PipeOpTaskPreprocSimple</a></code>,
<code><a href="mlr_graphs.html">mlr_graphs</a></code>,
<code><a href="mlr_pipeops.html">mlr_pipeops</a></code>,
<code><a href="mlr_pipeops_updatetarget.html">mlr_pipeops_updatetarget</a></code></p>
<p>Other PipeOps:
<code><a href="PipeOp.html">PipeOp</a></code>,
<code><a href="PipeOpEnsemble.html">PipeOpEnsemble</a></code>,
<code><a href="PipeOpImpute.html">PipeOpImpute</a></code>,
<code><a href="PipeOpTargetTrafo.html">PipeOpTargetTrafo</a></code>,
<code><a href="PipeOpTaskPreprocSimple.html">PipeOpTaskPreprocSimple</a></code>,
<code><a href="mlr_pipeops.html">mlr_pipeops</a></code>,
<code><a href="mlr_pipeops_boxcox.html">mlr_pipeops_boxcox</a></code>,
<code><a href="mlr_pipeops_branch.html">mlr_pipeops_branch</a></code>,
<code><a href="mlr_pipeops_chunk.html">mlr_pipeops_chunk</a></code>,
<code><a href="mlr_pipeops_classbalancing.html">mlr_pipeops_classbalancing</a></code>,
<code><a href="mlr_pipeops_classifavg.html">mlr_pipeops_classifavg</a></code>,
<code><a href="mlr_pipeops_classweights.html">mlr_pipeops_classweights</a></code>,
<code><a href="mlr_pipeops_colapply.html">mlr_pipeops_colapply</a></code>,
<code><a href="mlr_pipeops_collapsefactors.html">mlr_pipeops_collapsefactors</a></code>,
<code><a href="mlr_pipeops_colroles.html">mlr_pipeops_colroles</a></code>,
<code><a href="mlr_pipeops_copy.html">mlr_pipeops_copy</a></code>,
<code><a href="mlr_pipeops_datefeatures.html">mlr_pipeops_datefeatures</a></code>,
<code><a href="mlr_pipeops_encode.html">mlr_pipeops_encode</a></code>,
<code><a href="mlr_pipeops_encodeimpact.html">mlr_pipeops_encodeimpact</a></code>,
<code><a href="mlr_pipeops_encodelmer.html">mlr_pipeops_encodelmer</a></code>,
<code><a href="mlr_pipeops_featureunion.html">mlr_pipeops_featureunion</a></code>,
<code><a href="mlr_pipeops_filter.html">mlr_pipeops_filter</a></code>,
<code><a href="mlr_pipeops_fixfactors.html">mlr_pipeops_fixfactors</a></code>,
<code><a href="mlr_pipeops_histbin.html">mlr_pipeops_histbin</a></code>,
<code><a href="mlr_pipeops_ica.html">mlr_pipeops_ica</a></code>,
<code><a href="mlr_pipeops_imputeconstant.html">mlr_pipeops_imputeconstant</a></code>,
<code><a href="mlr_pipeops_imputehist.html">mlr_pipeops_imputehist</a></code>,
<code><a href="mlr_pipeops_imputelearner.html">mlr_pipeops_imputelearner</a></code>,
<code><a href="mlr_pipeops_imputemean.html">mlr_pipeops_imputemean</a></code>,
<code><a href="mlr_pipeops_imputemedian.html">mlr_pipeops_imputemedian</a></code>,
<code><a href="mlr_pipeops_imputemode.html">mlr_pipeops_imputemode</a></code>,
<code><a href="mlr_pipeops_imputeoor.html">mlr_pipeops_imputeoor</a></code>,
<code><a href="mlr_pipeops_imputesample.html">mlr_pipeops_imputesample</a></code>,
<code><a href="mlr_pipeops_kernelpca.html">mlr_pipeops_kernelpca</a></code>,
<code><a href="mlr_pipeops_learner.html">mlr_pipeops_learner</a></code>,
<code><a href="mlr_pipeops_missind.html">mlr_pipeops_missind</a></code>,
<code><a href="mlr_pipeops_modelmatrix.html">mlr_pipeops_modelmatrix</a></code>,
<code><a href="mlr_pipeops_multiplicityexply.html">mlr_pipeops_multiplicityexply</a></code>,
<code><a href="mlr_pipeops_multiplicityimply.html">mlr_pipeops_multiplicityimply</a></code>,
<code><a href="mlr_pipeops_mutate.html">mlr_pipeops_mutate</a></code>,
<code><a href="mlr_pipeops_nmf.html">mlr_pipeops_nmf</a></code>,
<code><a href="mlr_pipeops_nop.html">mlr_pipeops_nop</a></code>,
<code><a href="mlr_pipeops_ovrsplit.html">mlr_pipeops_ovrsplit</a></code>,
<code><a href="mlr_pipeops_ovrunite.html">mlr_pipeops_ovrunite</a></code>,
<code><a href="mlr_pipeops_pca.html">mlr_pipeops_pca</a></code>,
<code><a href="mlr_pipeops_proxy.html">mlr_pipeops_proxy</a></code>,
<code><a href="mlr_pipeops_quantilebin.html">mlr_pipeops_quantilebin</a></code>,
<code><a href="mlr_pipeops_randomprojection.html">mlr_pipeops_randomprojection</a></code>,
<code><a href="mlr_pipeops_randomresponse.html">mlr_pipeops_randomresponse</a></code>,
<code><a href="mlr_pipeops_regravg.html">mlr_pipeops_regravg</a></code>,
<code><a href="mlr_pipeops_removeconstants.html">mlr_pipeops_removeconstants</a></code>,
<code><a href="mlr_pipeops_renamecolumns.html">mlr_pipeops_renamecolumns</a></code>,
<code><a href="mlr_pipeops_replicate.html">mlr_pipeops_replicate</a></code>,
<code><a href="mlr_pipeops_rowapply.html">mlr_pipeops_rowapply</a></code>,
<code><a href="mlr_pipeops_scale.html">mlr_pipeops_scale</a></code>,
<code><a href="mlr_pipeops_scalemaxabs.html">mlr_pipeops_scalemaxabs</a></code>,
<code><a href="mlr_pipeops_scalerange.html">mlr_pipeops_scalerange</a></code>,
<code><a href="mlr_pipeops_select.html">mlr_pipeops_select</a></code>,
<code><a href="mlr_pipeops_smote.html">mlr_pipeops_smote</a></code>,
<code><a href="mlr_pipeops_smotenc.html">mlr_pipeops_smotenc</a></code>,
<code><a href="mlr_pipeops_spatialsign.html">mlr_pipeops_spatialsign</a></code>,
<code><a href="mlr_pipeops_subsample.html">mlr_pipeops_subsample</a></code>,
<code><a href="mlr_pipeops_targetinvert.html">mlr_pipeops_targetinvert</a></code>,
<code><a href="mlr_pipeops_targetmutate.html">mlr_pipeops_targetmutate</a></code>,
<code><a href="mlr_pipeops_targettrafoscalerange.html">mlr_pipeops_targettrafoscalerange</a></code>,
<code><a href="mlr_pipeops_textvectorizer.html">mlr_pipeops_textvectorizer</a></code>,
<code><a href="mlr_pipeops_threshold.html">mlr_pipeops_threshold</a></code>,
<code><a href="mlr_pipeops_tunethreshold.html">mlr_pipeops_tunethreshold</a></code>,
<code><a href="mlr_pipeops_unbranch.html">mlr_pipeops_unbranch</a></code>,
<code><a href="mlr_pipeops_updatetarget.html">mlr_pipeops_updatetarget</a></code>,
<code><a href="mlr_pipeops_vtreat.html">mlr_pipeops_vtreat</a></code>,
<code><a href="mlr_pipeops_yeojohnson.html">mlr_pipeops_yeojohnson</a></code></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Martin Binder, Florian Pfisterer, Lennart Schneider, Bernd Bischl, Michel Lang, Sebastian Fischer, Susanne Dandl.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

