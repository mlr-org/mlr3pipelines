<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Simple Pre-processing — preproc • mlr3pipelines</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.10/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.10/font.css" rel="stylesheet"><link href="../deps/Roboto_Slab-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Simple Pre-processing — preproc"><meta name="description" content="Function that offers a simple and direct way to train or predict PipeOps and Graphs on Tasks,
data.frames or data.tables.
Training happens if predict is set to FALSE and no state is passed to this function.
Prediction happens if predict is set to TRUE and if the passed Graph or PipeOp is either trained or a state
is explicitly passed to this function.
The passed  PipeOp or Graph gets modified by-reference."><meta property="og:description" content="Function that offers a simple and direct way to train or predict PipeOps and Graphs on Tasks,
data.frames or data.tables.
Training happens if predict is set to FALSE and no state is passed to this function.
Prediction happens if predict is set to TRUE and if the passed Graph or PipeOp is either trained or a state
is explicitly passed to this function.
The passed  PipeOp or Graph gets modified by-reference."><meta property="og:image" content="https://mlr3pipelines.mlr-org.com/logo.png"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mlr3pipelines</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.9.0-9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fa-file-alt"></span> Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/extending.html">Adding new PipeOps</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://mlr3book.mlr-org.com"><span class="fa fa-link"></span> mlr3book</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mlr-org/mlr3pipelines/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://lmmisld-lmu-stats-slds.srv.mwn.de/mlr_invite/" aria-label="Mattermost chat"><span class="fa fa-comments"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://stackoverflow.com/questions/tagged/mlr3" aria-label="Stack Overflow"><span class="fa fab fa-stack-overflow"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://mlr-org.com/" aria-label="RSS"><span class="fa fa-rss"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Simple Pre-processing</h1>
      <small class="dont-index">Source: <a href="https://github.com/mlr-org/mlr3pipelines/blob/master/R/preproc.R" class="external-link"><code>R/preproc.R</code></a></small>
      <div class="d-none name"><code>preproc.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Function that offers a simple and direct way to train or predict <code><a href="PipeOp.html">PipeOp</a></code>s and <code><a href="Graph.html">Graph</a></code>s on <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code>s,
<code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></code>s or <code><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></code>s.</p>
<p>Training happens if <code>predict</code> is set to <code>FALSE</code> and no <code>state</code> is passed to this function.
Prediction happens if <code>predict</code> is set to <code>TRUE</code> and if the passed <code>Graph</code> or <code>PipeOp</code> is either trained or a <code>state</code>
is explicitly passed to this function.</p>
<p>The passed  <code>PipeOp</code> or <code>Graph</code> gets modified by-reference.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">preproc</span><span class="op">(</span><span class="va">indata</span>, <span class="va">processor</span>, state <span class="op">=</span> <span class="cn">NULL</span>, predict <span class="op">=</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">state</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-indata">indata<a class="anchor" aria-label="anchor" href="#arg-indata"></a></dt>
<dd><p>(<code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> | <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></code> | <code><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></code> )<br>
Data to be pre-processed.</p></dd>


<dt id="arg-processor">processor<a class="anchor" aria-label="anchor" href="#arg-processor"></a></dt>
<dd><p>(<code><a href="Graph.html">Graph</a></code> | <code><a href="PipeOp.html">PipeOp</a></code>)<br><code>Graph</code> or <code>PipeOp</code> accepting a <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> that has one output channel.<br>
Whenever <code>indata</code> is passed a <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></code> or <code><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></code>, the output channel must return a <code>Task</code> to be converted back into a
<code>data.frame</code> or <code>data.table</code>. Additionally, <code>processor</code>s which only work on sub-classes of
<code><a href="https://mlr3.mlr-org.com/reference/TaskSupervised.html" class="external-link">TaskSupervised</a></code> will not accept <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></code> or <code><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></code>, as it would be unclear which column was the <code>target</code>.<br>
Be aware that the <code>processor</code> gets modified by-reference both during training, and if a <code>state</code> is passed to
this function. This especially means that the state of a trained <code>processor</code> will get overwritten when <code>state</code> is passed.<br>
You may want to use dictionary sugar functions to select a <code>processor</code> and to set its hyperparameters, e.g.
<code><a href="po.html">po()</a></code> or <code><a href="ppl.html">ppl()</a></code>.</p></dd>


<dt id="arg-state">state<a class="anchor" aria-label="anchor" href="#arg-state"></a></dt>
<dd><p>(named <code>list</code> | <code>NULL</code>)<br>
Optional state to be used for prediction, if the <code>processor</code> is untrained or if the current <code>state</code> of the <code>processor</code>
should be overwritten. Must be a complete and correct state for the respective <code>processor</code>.
Default <code>NULL</code> (do not overwrite <code>processor</code>'s <code>state</code>).</p></dd>


<dt id="arg-predict">predict<a class="anchor" aria-label="anchor" href="#arg-predict"></a></dt>
<dd><p>(<code>logical(1)</code>)<br>
Whether to predict (<code>TRUE</code>) or train (<code>FALSE</code>). By default, this is <code>FALSE</code> if <code>state</code> is <code>NULL</code> (<code>state</code>'s default),
and <code>TRUE</code> otherwise.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>any</code> | <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></code> | <code><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></code>:
If <code>indata</code> is a <code>Task</code>, whatever is returned by the <code>processor</code>'s single output channel is returned.
If <code>indata</code> is a <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></code> or <code><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></code>, an object of the same class is returned, or
if the <code>processor</code>'s output channel does not return a <code>Task</code>, an error is thrown.</p>
    </div>
    <div class="section level2">
    <h2 id="internals">Internals<a class="anchor" aria-label="anchor" href="#internals"></a></h2>


<p>If <code>processor</code> is a <code><a href="PipeOp.html">PipeOp</a></code>, the S3 method <code>preproc.PipeOp</code> gets called first, converting the <code>PipeOp</code> into a
<code><a href="Graph.html">Graph</a></code> and wrapping the <code>state</code> appropriately, before calling the S3 method <code>preproc.Graph</code> with the modified objects.</p>
<p>If <code>indata</code> is a <code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></code> or <code><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></code>, a
<code><a href="https://mlr3.mlr-org.com/reference/TaskUnsupervised.html" class="external-link">TaskUnsupervised</a></code> is constructed internally. This implies that <code>processor</code>s which only work on sub-classes
of <code><a href="https://mlr3.mlr-org.com/reference/TaskSupervised.html" class="external-link">TaskSupervised</a></code> will not work with these input types for <code>indata</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://mlr3.mlr-org.com" class="external-link">"mlr3"</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">task</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">tsk</a></span><span class="op">(</span><span class="st">"iris"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pop</span> <span class="op">=</span> <span class="fu"><a href="po.html">po</a></span><span class="op">(</span><span class="st">"pca"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Training</span></span></span>
<span class="r-in"><span><span class="fu">preproc</span><span class="op">(</span><span class="va">task</span>, <span class="va">pop</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="color: #0000BB; font-weight: bold;">&lt;TaskClassif&gt;</span><span style="font-weight: bold;"> (150x5): Iris Flowers</span> <span style="color: #00BBBB;">─────────────────────────────────────────</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> • Target: Species</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> • Target classes: setosa (33%), versicolor (33%), virginica (33%)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> • Properties: multiclass</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> • Features (4):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   • dbl (4): PC1, PC2, PC3, PC4</span>
<span class="r-in"><span><span class="co"># Note that the PipeOp gets trained through this</span></span></span>
<span class="r-in"><span><span class="va">pop</span><span class="op">$</span><span class="va">is_trained</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Predicting a trained PipeOp (trained through previous call to preproc)</span></span></span>
<span class="r-in"><span><span class="fu">preproc</span><span class="op">(</span><span class="va">task</span>, <span class="va">pop</span>, predict <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="color: #0000BB; font-weight: bold;">&lt;TaskClassif&gt;</span><span style="font-weight: bold;"> (150x5): Iris Flowers</span> <span style="color: #00BBBB;">─────────────────────────────────────────</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> • Target: Species</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> • Target classes: setosa (33%), versicolor (33%), virginica (33%)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> • Properties: multiclass</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> • Features (4):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   • dbl (4): PC1, PC2, PC3, PC4</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Predicting using a given state</span></span></span>
<span class="r-in"><span><span class="co"># We use the state of the PipeOp from the last example and then reset it</span></span></span>
<span class="r-in"><span><span class="va">state</span> <span class="op">=</span> <span class="va">pop</span><span class="op">$</span><span class="va">state</span></span></span>
<span class="r-in"><span><span class="va">pop</span><span class="op">$</span><span class="va">state</span> <span class="op">=</span> <span class="cn">NULL</span></span></span>
<span class="r-in"><span><span class="fu">preproc</span><span class="op">(</span><span class="va">task</span>, <span class="va">pop</span>, <span class="va">state</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="color: #0000BB; font-weight: bold;">&lt;TaskClassif&gt;</span><span style="font-weight: bold;"> (150x5): Iris Flowers</span> <span style="color: #00BBBB;">─────────────────────────────────────────</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> • Target: Species</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> • Target classes: setosa (33%), versicolor (33%), virginica (33%)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> • Properties: multiclass</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> • Features (4):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   • dbl (4): PC1, PC2, PC3, PC4</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Note that the PipeOp's state may get overwritten inadvertently during</span></span></span>
<span class="r-in"><span><span class="co"># training or if a state is given</span></span></span>
<span class="r-in"><span><span class="va">pop</span><span class="op">$</span><span class="va">state</span><span class="op">$</span><span class="va">sdev</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2.0562689 0.4926162 0.2796596 0.1543862</span>
<span class="r-in"><span><span class="fu">preproc</span><span class="op">(</span><span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">tsk</a></span><span class="op">(</span><span class="st">"wine"</span><span class="op">)</span>, <span class="va">pop</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="color: #0000BB; font-weight: bold;">&lt;TaskClassif&gt;</span><span style="font-weight: bold;"> (178x14): Wine Regions</span> <span style="color: #00BBBB;">────────────────────────────────────────</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> • Target: type</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> • Target classes: 2 (40%), 1 (33%), 3 (27%)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> • Properties: multiclass</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> • Features (13):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   • dbl (13): PC1, PC10, PC11, PC12, PC13, PC2, PC3, PC4, PC5, PC6, PC7, PC8,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   PC9</span>
<span class="r-in"><span><span class="va">pop</span><span class="op">$</span><span class="va">state</span><span class="op">$</span><span class="va">sdev</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 314.9631558  13.1352680   3.0721513   2.2340946   1.1085329   0.9170953</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7]   0.5281794   0.3890775   0.3348085   0.2677734   0.1938452   0.1451632</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13]   0.0905743</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Piping multiple preproc() calls, using dictionary sugar to set parameters</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">tsk</a></span><span class="op">(</span><span class="st">"penguins"</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">preproc</span><span class="op">(</span><span class="fu"><a href="po.html">po</a></span><span class="op">(</span><span class="st">"imputemode"</span>, affect_columns <span class="op">=</span> <span class="fu"><a href="Selector.html">selector_name</a></span><span class="op">(</span><span class="st">"sex"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">preproc</span><span class="op">(</span><span class="fu"><a href="po.html">po</a></span><span class="op">(</span><span class="st">"imputemean"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="color: #0000BB; font-weight: bold;">&lt;TaskClassif&gt;</span><span style="font-weight: bold;"> (344x8): Palmer Penguins</span> <span style="color: #00BBBB;">──────────────────────────────────────</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> • Target: species</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> • Target classes: Adelie (44%), Gentoo (36%), Chinstrap (20%)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> • Properties: multiclass</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> • Features (7):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   • int (3): body_mass, flipper_length, year</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   • dbl (2): bill_depth, bill_length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   • fct (2): island, sex</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use preproc with a Graph</span></span></span>
<span class="r-in"><span><span class="va">gr</span> <span class="op">=</span> <span class="fu"><a href="po.html">po</a></span><span class="op">(</span><span class="st">"pca"</span>, rank. <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op"><a href="grapes-greater-than-greater-than-grapes.html">%&gt;&gt;%</a></span> <span class="fu"><a href="po.html">po</a></span><span class="op">(</span><span class="st">"learner"</span>, learner <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">lrn</a></span><span class="op">(</span><span class="st">"classif.rpart"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">preproc</span><span class="op">(</span><span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">tsk</a></span><span class="op">(</span><span class="st">"sonar"</span><span class="op">)</span>, <span class="va">gr</span><span class="op">)</span>  <span class="co"># returns NULL because of the learner</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NULL</span>
<span class="r-in"><span><span class="fu">preproc</span><span class="op">(</span><span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">tsk</a></span><span class="op">(</span><span class="st">"sonar"</span><span class="op">)</span>, <span class="va">gr</span>, predict <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="color: #0000BB; font-weight: bold;">&lt;PredictionClassif&gt;</span><span style="font-weight: bold;"> for </span><span style="color: #0000BB; font-weight: bold;">208</span><span style="font-weight: bold;"> observations:</span> <span style="color: #00BBBB;">───────────────────────────────────</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  row_ids truth response</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        1     R        R</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        2     R        R</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        3     R        R</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      ---   ---      ---</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      206     M        M</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      207     M        M</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      208     M        M</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Training with a data.table input</span></span></span>
<span class="r-in"><span><span class="co"># Note that `$data()` drops the information that "Species" is the target.</span></span></span>
<span class="r-in"><span><span class="co"># It gets handled like an ordinary feature here.</span></span></span>
<span class="r-in"><span><span class="va">dt</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">tsk</a></span><span class="op">(</span><span class="st">"iris"</span><span class="op">)</span><span class="op">$</span><span class="fu">data</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">preproc</span><span class="op">(</span><span class="va">dt</span>, <span class="va">pop</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Species       PC1         PC2         PC3          PC4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         &lt;fctr&gt;     &lt;num&gt;       &lt;num&gt;       &lt;num&gt;        &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1:    setosa -2.684126 -0.31939725  0.02791483 -0.002262437</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2:    setosa -2.714142  0.17700123  0.21046427 -0.099026550</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3:    setosa -2.888991  0.14494943 -0.01790026 -0.019968390</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4:    setosa -2.745343  0.31829898 -0.03155937  0.075575817</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5:    setosa -2.728717 -0.32675451 -0.09007924  0.061258593</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ---                                                         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 146: virginica  1.944110 -0.18753230 -0.17782509 -0.426195940</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 147: virginica  1.527167  0.37531698  0.12189817 -0.254367442</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 148: virginica  1.764346 -0.07885885 -0.13048163 -0.137001274</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 149: virginica  1.900942 -0.11662796 -0.72325156 -0.044595305</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 150: virginica  1.390189  0.28266094 -0.36290965  0.155038628</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Predicting with a data.table input</span></span></span>
<span class="r-in"><span><span class="fu">preproc</span><span class="op">(</span><span class="va">dt</span>, <span class="va">pop</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Species       PC1         PC2         PC3          PC4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         &lt;fctr&gt;     &lt;num&gt;       &lt;num&gt;       &lt;num&gt;        &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1:    setosa -2.684126 -0.31939725  0.02791483 -0.002262437</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2:    setosa -2.714142  0.17700123  0.21046427 -0.099026550</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3:    setosa -2.888991  0.14494943 -0.01790026 -0.019968390</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4:    setosa -2.745343  0.31829898 -0.03155937  0.075575817</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5:    setosa -2.728717 -0.32675451 -0.09007924  0.061258593</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ---                                                         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 146: virginica  1.944110 -0.18753230 -0.17782509 -0.426195940</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 147: virginica  1.527167  0.37531698  0.12189817 -0.254367442</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 148: virginica  1.764346 -0.07885885 -0.13048163 -0.137001274</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 149: virginica  1.900942 -0.11662796 -0.72325156 -0.044595305</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 150: virginica  1.390189  0.28266094 -0.36290965  0.155038628</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Martin Binder, Florian Pfisterer, Lennart Schneider, Bernd Bischl, Michel Lang, Sebastian Fischer, Susanne Dandl.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

