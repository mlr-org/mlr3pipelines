<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Feature Filtering — mlr_pipeops_filter • mlr3pipelines</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.9/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.9/font.css" rel="stylesheet"><link href="../deps/Roboto_Slab-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="../deps/MathJax-3.2.2/tex-chtml.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Feature Filtering — mlr_pipeops_filter"><meta name="description" content="Feature filtering using a mlr3filters::Filter object, see the
mlr3filters package.
If a Filter can only operate on a subset of columns based on column type, then only these features are considered and filtered.
nfeat and frac will count for the features of the type that the Filter can operate on;
this means e.g. that setting nfeat to 0 will only remove features of the type that the Filter can work with."><meta property="og:description" content="Feature filtering using a mlr3filters::Filter object, see the
mlr3filters package.
If a Filter can only operate on a subset of columns based on column type, then only these features are considered and filtered.
nfeat and frac will count for the features of the type that the Filter can operate on;
this means e.g. that setting nfeat to 0 will only remove features of the type that the Filter can work with."><meta property="og:image" content="https://mlr3pipelines.mlr-org.com/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mlr3pipelines</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.7.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fa-file-alt"></span> Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/extending.html">Adding new PipeOps</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://mlr3book.mlr-org.com"><span class="fa fa-link"></span> mlr3book</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mlr-org/mlr3pipelines/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://lmmisld-lmu-stats-slds.srv.mwn.de/mlr_invite/" aria-label="Mattermost chat"><span class="fa fa-comments"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://stackoverflow.com/questions/tagged/mlr3" aria-label="Stack Overflow"><span class="fa fab fa-stack-overflow"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://mlr-org.com/" aria-label="RSS"><span class="fa fa-rss"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Feature Filtering</h1>
      <small class="dont-index">Source: <a href="https://github.com/mlr-org/mlr3pipelines/blob/master/R/PipeOpFilter.R" class="external-link"><code>R/PipeOpFilter.R</code></a></small>
      <div class="d-none name"><code>mlr_pipeops_filter.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Feature filtering using a <code><a href="https://mlr3filters.mlr-org.com/reference/Filter.html" class="external-link">mlr3filters::Filter</a></code> object, see the
<a href="https://CRAN.R-project.org/package=mlr3filters" class="external-link"><span class="pkg">mlr3filters</span></a> package.</p>
<p>If a <code>Filter</code> can only operate on a subset of columns based on column type, then only these features are considered and filtered.
<code>nfeat</code> and <code>frac</code> will count for the features of the type that the <code>Filter</code> can operate on;
this means e.g. that setting <code>nfeat</code> to 0 will only remove features of the type that the <code>Filter</code> can work with.</p>
    </div>


    <div class="section level2">
    <h2 id="format">Format<a class="anchor" aria-label="anchor" href="#format"></a></h2>
    <p><code><a href="https://r6.r-lib.org/reference/R6Class.html" class="external-link">R6Class</a></code> object inheriting from <code><a href="PipeOpTaskPreprocSimple.html">PipeOpTaskPreprocSimple</a></code>/<code><a href="PipeOpTaskPreproc.html">PipeOpTaskPreproc</a></code>/<code><a href="PipeOp.html">PipeOp</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="construction">Construction<a class="anchor" aria-label="anchor" href="#construction"></a></h2>



<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>PipeOpFilter<span class="sc">$</span><span class="fu">new</span>(filter, <span class="at">id =</span> filter<span class="sc">$</span>id, <span class="at">param_vals =</span> <span class="fu">list</span>())</span></code></pre><p></p></div><ul><li><p><code>filter</code> :: <code><a href="https://mlr3filters.mlr-org.com/reference/Filter.html" class="external-link">Filter</a></code><br><code><a href="https://mlr3filters.mlr-org.com/reference/Filter.html" class="external-link">Filter</a></code> used for feature filtering.
This argument is always cloned; to access the <code><a href="https://mlr3filters.mlr-org.com/reference/Filter.html" class="external-link">Filter</a></code> inside <code>PipeOpFilter</code> by-reference, use <code>$filter</code>.<br></p></li>
<li><p><code>id</code> :: <code>character(1)</code>
Identifier of the resulting  object, defaulting to the <code>id</code> of the <code><a href="https://mlr3filters.mlr-org.com/reference/Filter.html" class="external-link">Filter</a></code> being used.</p></li>
<li><p><code>param_vals</code> :: named <code>list</code><br>
List of hyperparameter settings, overwriting the hyperparameter settings that would otherwise be set during construction. Default <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="input-and-output-channels">Input and Output Channels<a class="anchor" aria-label="anchor" href="#input-and-output-channels"></a></h2>


<p>Input and output channels are inherited from <code><a href="PipeOpTaskPreproc.html">PipeOpTaskPreproc</a></code>.</p>
<p>The output is the input <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> with features removed that were filtered out.</p>
    </div>
    <div class="section level2">
    <h2 id="state">State<a class="anchor" aria-label="anchor" href="#state"></a></h2>


<p>The <code>$state</code> is a named <code>list</code> with the <code>$state</code> elements inherited from <code><a href="PipeOpTaskPreproc.html">PipeOpTaskPreproc</a></code>, as well as:</p><ul><li><p><code>scores</code> :: named <code>numeric</code><br>
Scores calculated for all features of the training <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> which are being used
as cutoff for feature filtering. If <code>frac</code> or <code>nfeat</code> is given, the underlying <code><a href="https://mlr3filters.mlr-org.com/reference/Filter.html" class="external-link">Filter</a></code> may choose to not calculate scores for
all features that are given. This only includes features on which the <code><a href="https://mlr3filters.mlr-org.com/reference/Filter.html" class="external-link">Filter</a></code> can operate; e.g.
if the <code><a href="https://mlr3filters.mlr-org.com/reference/Filter.html" class="external-link">Filter</a></code> can only operate on numeric features, then scores for factorial features will not be given.</p></li>
<li><p><code>features</code> :: <code>character</code><br>
Names of features that are being kept. Features of types that the <code><a href="https://mlr3filters.mlr-org.com/reference/Filter.html" class="external-link">Filter</a></code> can not operate on are always being kept.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="parameters">Parameters<a class="anchor" aria-label="anchor" href="#parameters"></a></h2>


<p>The parameters are the parameters inherited from the <code><a href="PipeOpTaskPreproc.html">PipeOpTaskPreproc</a></code>, as well as the parameters of the <code><a href="https://mlr3filters.mlr-org.com/reference/Filter.html" class="external-link">Filter</a></code>
used by this object. Besides, parameters introduced are:</p><ul><li><p><code>filter.nfeat</code> :: <code>numeric(1)</code> <br>
Number of features to select.
Mutually exclusive with <code>frac</code>, <code>cutoff</code>, and <code>permuted</code>.</p></li>
<li><p><code>filter.frac</code> :: <code>numeric(1)</code> <br>
Fraction of features to keep.
Mutually exclusive with <code>nfeat</code>, <code>cutoff</code>, and <code>permuted</code>.</p></li>
<li><p><code>filter.cutoff</code> :: <code>numeric(1)</code> <br>
Minimum value of filter heuristic for which to keep features.
Mutually exclusive with <code>nfeat</code>, <code>frac</code>, and <code>permuted</code>.</p></li>
<li><p><code>filter.permuted</code> :: <code>integer(1)</code> <br>
If this parameter is set, a random permutation of each feature is added to the task before
applying the filter. All features selected before the <code>permuted</code>-th permuted features is selected
are kept. This is similar to the approach in Wu (2007) and Thomas (2017).
Mutually exclusive with <code>nfeat</code>, <code>frac</code>, and <code>cutoff</code>.</p></li>
</ul><p>Note that at least one of <code>filter.nfeat</code>, <code>filter.frac</code>, <code>filter.cutoff</code>, and <code>filter.permuted</code> must be given.</p>
    </div>
    <div class="section level2">
    <h2 id="internals">Internals<a class="anchor" aria-label="anchor" href="#internals"></a></h2>


<p>This does <em>not</em> use the <code>$.select_cols</code> feature of <code><a href="PipeOpTaskPreproc.html">PipeOpTaskPreproc</a></code> to select only features compatible with the <code><a href="https://mlr3filters.mlr-org.com/reference/Filter.html" class="external-link">Filter</a></code>;
instead the whole <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> is used by <code>private$.get_state()</code> and subset internally.</p>
    </div>
    <div class="section level2">
    <h2 id="fields">Fields<a class="anchor" aria-label="anchor" href="#fields"></a></h2>


<p>Fields inherited from <code><a href="PipeOp.html">PipeOp</a></code>, as well as:</p><ul><li><p><code>filter</code> :: <code><a href="https://mlr3filters.mlr-org.com/reference/Filter.html" class="external-link">Filter</a></code><br><code><a href="https://mlr3filters.mlr-org.com/reference/Filter.html" class="external-link">Filter</a></code> that is being used for feature filtering. Do <em>not</em> use this slot to get to the feature filtering scores
after training; instead, use <code>$state$scores</code>. Read-only.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>


<p>Methods inherited from <code><a href="PipeOpTaskPreprocSimple.html">PipeOpTaskPreprocSimple</a></code>/<code><a href="PipeOpTaskPreproc.html">PipeOpTaskPreproc</a></code>/<code><a href="PipeOp.html">PipeOp</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Wu Y, Boos DD, Stefanski LA (2007).
“Controlling Variable Selection by the Addition of Pseudovariables.”
<em>Journal of the American Statistical Association</em>, <b>102</b>(477), 235–243.
<a href="https://doi.org/10.1198/016214506000000843" class="external-link">doi:10.1198/016214506000000843</a>
.</p>
<p>Thomas J, Hepp T, Mayr A, Bischl B (2017).
“Probing for Sparse and Fast Variable Selection with Model-Based Boosting.”
<em>Computational and Mathematical Methods in Medicine</em>, <b>2017</b>, 1–8.
<a href="https://doi.org/10.1155/2017/1421409" class="external-link">doi:10.1155/2017/1421409</a>
.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>https://mlr-org.com/pipeops.html</p>
<p>Other PipeOps:
<code><a href="PipeOp.html">PipeOp</a></code>,
<code><a href="PipeOpEncodePL.html">PipeOpEncodePL</a></code>,
<code><a href="PipeOpEnsemble.html">PipeOpEnsemble</a></code>,
<code><a href="PipeOpImpute.html">PipeOpImpute</a></code>,
<code><a href="PipeOpTargetTrafo.html">PipeOpTargetTrafo</a></code>,
<code><a href="PipeOpTaskPreproc.html">PipeOpTaskPreproc</a></code>,
<code><a href="PipeOpTaskPreprocSimple.html">PipeOpTaskPreprocSimple</a></code>,
<code><a href="mlr_pipeops.html">mlr_pipeops</a></code>,
<code><a href="mlr_pipeops_adas.html">mlr_pipeops_adas</a></code>,
<code><a href="mlr_pipeops_blsmote.html">mlr_pipeops_blsmote</a></code>,
<code><a href="mlr_pipeops_boxcox.html">mlr_pipeops_boxcox</a></code>,
<code><a href="mlr_pipeops_branch.html">mlr_pipeops_branch</a></code>,
<code><a href="mlr_pipeops_chunk.html">mlr_pipeops_chunk</a></code>,
<code><a href="mlr_pipeops_classbalancing.html">mlr_pipeops_classbalancing</a></code>,
<code><a href="mlr_pipeops_classifavg.html">mlr_pipeops_classifavg</a></code>,
<code><a href="mlr_pipeops_classweights.html">mlr_pipeops_classweights</a></code>,
<code><a href="mlr_pipeops_colapply.html">mlr_pipeops_colapply</a></code>,
<code><a href="mlr_pipeops_collapsefactors.html">mlr_pipeops_collapsefactors</a></code>,
<code><a href="mlr_pipeops_colroles.html">mlr_pipeops_colroles</a></code>,
<code><a href="mlr_pipeops_copy.html">mlr_pipeops_copy</a></code>,
<code><a href="mlr_pipeops_datefeatures.html">mlr_pipeops_datefeatures</a></code>,
<code><a href="mlr_pipeops_decode.html">mlr_pipeops_decode</a></code>,
<code><a href="mlr_pipeops_encode.html">mlr_pipeops_encode</a></code>,
<code><a href="mlr_pipeops_encodeimpact.html">mlr_pipeops_encodeimpact</a></code>,
<code><a href="mlr_pipeops_encodelmer.html">mlr_pipeops_encodelmer</a></code>,
<code><a href="mlr_pipeops_encodeplquantiles.html">mlr_pipeops_encodeplquantiles</a></code>,
<code><a href="mlr_pipeops_encodepltree.html">mlr_pipeops_encodepltree</a></code>,
<code><a href="mlr_pipeops_featureunion.html">mlr_pipeops_featureunion</a></code>,
<code><a href="mlr_pipeops_fixfactors.html">mlr_pipeops_fixfactors</a></code>,
<code><a href="mlr_pipeops_histbin.html">mlr_pipeops_histbin</a></code>,
<code><a href="mlr_pipeops_ica.html">mlr_pipeops_ica</a></code>,
<code><a href="mlr_pipeops_imputeconstant.html">mlr_pipeops_imputeconstant</a></code>,
<code><a href="mlr_pipeops_imputehist.html">mlr_pipeops_imputehist</a></code>,
<code><a href="mlr_pipeops_imputelearner.html">mlr_pipeops_imputelearner</a></code>,
<code><a href="mlr_pipeops_imputemean.html">mlr_pipeops_imputemean</a></code>,
<code><a href="mlr_pipeops_imputemedian.html">mlr_pipeops_imputemedian</a></code>,
<code><a href="mlr_pipeops_imputemode.html">mlr_pipeops_imputemode</a></code>,
<code><a href="mlr_pipeops_imputeoor.html">mlr_pipeops_imputeoor</a></code>,
<code><a href="mlr_pipeops_imputesample.html">mlr_pipeops_imputesample</a></code>,
<code><a href="mlr_pipeops_kernelpca.html">mlr_pipeops_kernelpca</a></code>,
<code><a href="mlr_pipeops_learner.html">mlr_pipeops_learner</a></code>,
<code><a href="mlr_pipeops_learner_pi_cvplus.html">mlr_pipeops_learner_pi_cvplus</a></code>,
<code><a href="mlr_pipeops_learner_quantiles.html">mlr_pipeops_learner_quantiles</a></code>,
<code><a href="mlr_pipeops_missind.html">mlr_pipeops_missind</a></code>,
<code><a href="mlr_pipeops_modelmatrix.html">mlr_pipeops_modelmatrix</a></code>,
<code><a href="mlr_pipeops_multiplicityexply.html">mlr_pipeops_multiplicityexply</a></code>,
<code><a href="mlr_pipeops_multiplicityimply.html">mlr_pipeops_multiplicityimply</a></code>,
<code><a href="mlr_pipeops_mutate.html">mlr_pipeops_mutate</a></code>,
<code><a href="mlr_pipeops_nearmiss.html">mlr_pipeops_nearmiss</a></code>,
<code><a href="mlr_pipeops_nmf.html">mlr_pipeops_nmf</a></code>,
<code><a href="mlr_pipeops_nop.html">mlr_pipeops_nop</a></code>,
<code><a href="mlr_pipeops_ovrsplit.html">mlr_pipeops_ovrsplit</a></code>,
<code><a href="mlr_pipeops_ovrunite.html">mlr_pipeops_ovrunite</a></code>,
<code><a href="mlr_pipeops_pca.html">mlr_pipeops_pca</a></code>,
<code><a href="mlr_pipeops_proxy.html">mlr_pipeops_proxy</a></code>,
<code><a href="mlr_pipeops_quantilebin.html">mlr_pipeops_quantilebin</a></code>,
<code><a href="mlr_pipeops_randomprojection.html">mlr_pipeops_randomprojection</a></code>,
<code><a href="mlr_pipeops_randomresponse.html">mlr_pipeops_randomresponse</a></code>,
<code><a href="mlr_pipeops_regravg.html">mlr_pipeops_regravg</a></code>,
<code><a href="mlr_pipeops_removeconstants.html">mlr_pipeops_removeconstants</a></code>,
<code><a href="mlr_pipeops_renamecolumns.html">mlr_pipeops_renamecolumns</a></code>,
<code><a href="mlr_pipeops_replicate.html">mlr_pipeops_replicate</a></code>,
<code><a href="mlr_pipeops_rowapply.html">mlr_pipeops_rowapply</a></code>,
<code><a href="mlr_pipeops_scale.html">mlr_pipeops_scale</a></code>,
<code><a href="mlr_pipeops_scalemaxabs.html">mlr_pipeops_scalemaxabs</a></code>,
<code><a href="mlr_pipeops_scalerange.html">mlr_pipeops_scalerange</a></code>,
<code><a href="mlr_pipeops_select.html">mlr_pipeops_select</a></code>,
<code><a href="mlr_pipeops_smote.html">mlr_pipeops_smote</a></code>,
<code><a href="mlr_pipeops_smotenc.html">mlr_pipeops_smotenc</a></code>,
<code><a href="mlr_pipeops_spatialsign.html">mlr_pipeops_spatialsign</a></code>,
<code><a href="mlr_pipeops_subsample.html">mlr_pipeops_subsample</a></code>,
<code><a href="mlr_pipeops_targetinvert.html">mlr_pipeops_targetinvert</a></code>,
<code><a href="mlr_pipeops_targetmutate.html">mlr_pipeops_targetmutate</a></code>,
<code><a href="mlr_pipeops_targettrafoscalerange.html">mlr_pipeops_targettrafoscalerange</a></code>,
<code><a href="mlr_pipeops_textvectorizer.html">mlr_pipeops_textvectorizer</a></code>,
<code><a href="mlr_pipeops_threshold.html">mlr_pipeops_threshold</a></code>,
<code><a href="mlr_pipeops_tomek.html">mlr_pipeops_tomek</a></code>,
<code><a href="mlr_pipeops_tunethreshold.html">mlr_pipeops_tunethreshold</a></code>,
<code><a href="mlr_pipeops_unbranch.html">mlr_pipeops_unbranch</a></code>,
<code><a href="mlr_pipeops_updatetarget.html">mlr_pipeops_updatetarget</a></code>,
<code><a href="mlr_pipeops_vtreat.html">mlr_pipeops_vtreat</a></code>,
<code><a href="mlr_pipeops_yeojohnson.html">mlr_pipeops_yeojohnson</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://mlr3.mlr-org.com" class="external-link">"mlr3"</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://mlr3filters.mlr-org.com" class="external-link">"mlr3filters"</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># setup PipeOpFilter to keep the 5 most important</span></span></span>
<span class="r-in"><span><span class="co"># features of the spam task w.r.t. their AUC</span></span></span>
<span class="r-in"><span><span class="va">task</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">tsk</a></span><span class="op">(</span><span class="st">"spam"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">filter</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3filters.mlr-org.com/reference/flt.html" class="external-link">flt</a></span><span class="op">(</span><span class="st">"auc"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">po</span> <span class="op">=</span> <span class="fu"><a href="po.html">po</a></span><span class="op">(</span><span class="st">"filter"</span>, filter <span class="op">=</span> <span class="va">filter</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">po</span><span class="op">$</span><span class="va">param_set</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;ParamSetCollection(5)&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 id    class lower upper nlevels        default  value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             &lt;char&gt;   &lt;char&gt; &lt;num&gt; &lt;num&gt;   &lt;num&gt;         &lt;list&gt; &lt;list&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:    filter.nfeat ParamInt     0   Inf     Inf &lt;NoDefault[0]&gt; [NULL]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:     filter.frac ParamDbl     0     1     Inf &lt;NoDefault[0]&gt; [NULL]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:   filter.cutoff ParamDbl  -Inf   Inf     Inf &lt;NoDefault[0]&gt; [NULL]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4: filter.permuted ParamInt     1   Inf     Inf &lt;NoDefault[0]&gt; [NULL]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:  affect_columns ParamUty    NA    NA     Inf  &lt;Selector[1]&gt; [NULL]</span>
<span class="r-in"><span><span class="va">po</span><span class="op">$</span><span class="va">param_set</span><span class="op">$</span><span class="va">values</span><span class="op">$</span><span class="va">filter.nfeat</span> <span class="op">=</span> <span class="fl">5</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># filter the task</span></span></span>
<span class="r-in"><span><span class="va">filtered_task</span> <span class="op">=</span> <span class="va">po</span><span class="op">$</span><span class="fu">train</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">task</span><span class="op">)</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># filtered task + extracted AUC scores</span></span></span>
<span class="r-in"><span><span class="va">filtered_task</span><span class="op">$</span><span class="va">feature_names</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "capitalAve"      "capitalLong"     "charDollar"      "charExclamation"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5] "your"           </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">po</span><span class="op">$</span><span class="va">state</span><span class="op">$</span><span class="va">scores</span>, <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> charExclamation     capitalLong      capitalAve            your      charDollar </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       0.3290461       0.3041626       0.2882004       0.2801659       0.2721394 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    capitalTotal            free             our             you          remove </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       0.2622801       0.2327285       0.2109325       0.2104681       0.2031303 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># feature selection embedded in a 3-fold cross validation</span></span></span>
<span class="r-in"><span><span class="co"># keep 30% of features based on their AUC score</span></span></span>
<span class="r-in"><span><span class="va">task</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">tsk</a></span><span class="op">(</span><span class="st">"spam"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">gr</span> <span class="op">=</span> <span class="fu"><a href="po.html">po</a></span><span class="op">(</span><span class="st">"filter"</span>, filter <span class="op">=</span> <span class="fu"><a href="https://mlr3filters.mlr-org.com/reference/flt.html" class="external-link">flt</a></span><span class="op">(</span><span class="st">"auc"</span><span class="op">)</span>, filter.frac <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op"><a href="grapes-greater-than-greater-than-grapes.html">%&gt;&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="po.html">po</a></span><span class="op">(</span><span class="st">"learner"</span>, <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">lrn</a></span><span class="op">(</span><span class="st">"classif.rpart"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">learner</span> <span class="op">=</span> <span class="va"><a href="mlr_learners_graph.html">GraphLearner</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">gr</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">rr</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/resample.html" class="external-link">resample</a></span><span class="op">(</span><span class="va">task</span>, <span class="va">learner</span>, <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">rsmp</a></span><span class="op">(</span><span class="st">"holdout"</span><span class="op">)</span>, store_models <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">rr</span><span class="op">$</span><span class="va">learners</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">model</span><span class="op">$</span><span class="va">auc</span><span class="op">$</span><span class="va">scores</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   charExclamation       capitalLong              your        capitalAve </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      0.3238152005      0.3042322800      0.2875033175      0.2871065413 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        charDollar      capitalTotal              free               you </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      0.2764362681      0.2662379684      0.2320238685      0.2143728547 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               our            remove             money               all </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      0.2098176687      0.2046412205      0.1818790031      0.1816593829 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                hp            num000          business              over </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      0.1748898581      0.1585216214      0.1501428748      0.1415560087 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          internet            george              mail               hpl </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      0.1348769419      0.1342355533      0.1334216533      0.1326369475 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             email           receive           address             order </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      0.1325690488      0.1315892724      0.1237574755      0.1168579037 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              make           num1999          charHash            credit </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      0.1089995665      0.1046412205      0.0998692894      0.0988800028 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              will            people         addresses              labs </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      0.0958661400      0.0913733235      0.0742654995      0.0736150430 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               edu            num650             num85               lab </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      0.0700172954      0.0699748310      0.0686686100      0.0592269277 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        technology           meeting            telnet              data </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      0.0532025196      0.0529178757      0.0527411621      0.0435513907 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                pm            report           project charSquarebracket </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      0.0391912753      0.0380785767      0.0378828426      0.0351343820 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            num857            num415          original        conference </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      0.0343571959      0.0325759050      0.0297613150      0.0283529141 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                cs     charSemicolon                re              font </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      0.0268617962      0.0264183534      0.0260759846      0.0222261050 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  charRoundbracket            direct             num3d             table </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      0.0219286334      0.0131568704      0.0093397236      0.0053856736 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             parts </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      0.0007809459 </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Martin Binder, Florian Pfisterer, Lennart Schneider, Bernd Bischl, Michel Lang, Sebastian Fischer, Susanne Dandl.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

