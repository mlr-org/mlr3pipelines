<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Piecewise Linear Encoding using Quantiles — mlr_pipeops_encodeplquantiles • mlr3pipelines</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.10/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.10/font.css" rel="stylesheet"><link href="../deps/Roboto_Slab-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Piecewise Linear Encoding using Quantiles — mlr_pipeops_encodeplquantiles"><meta name="description" content="Encodes numeric and integer feature columns using piecewise lienar encoding. For details, see documentation of
PipeOpEncodePL or Gorishniy et al. (2022).
Bins are constructed by taking the quantiles of the respective feature column as bin boundaries. The first and
last boundaries are set to the minimum and maximum value of the feature, respectively. The number of bins can be
controlled with the numsplits hyperparameter.
Affected feature columns may contain NAs. These are ignored when calculating quantiles."><meta property="og:description" content="Encodes numeric and integer feature columns using piecewise lienar encoding. For details, see documentation of
PipeOpEncodePL or Gorishniy et al. (2022).
Bins are constructed by taking the quantiles of the respective feature column as bin boundaries. The first and
last boundaries are set to the minimum and maximum value of the feature, respectively. The number of bins can be
controlled with the numsplits hyperparameter.
Affected feature columns may contain NAs. These are ignored when calculating quantiles."><meta property="og:image" content="https://mlr3pipelines.mlr-org.com/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mlr3pipelines</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.9.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fa-file-alt"></span> Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/extending.html">Adding new PipeOps</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://mlr3book.mlr-org.com"><span class="fa fa-link"></span> mlr3book</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mlr-org/mlr3pipelines/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://lmmisld-lmu-stats-slds.srv.mwn.de/mlr_invite/" aria-label="Mattermost chat"><span class="fa fa-comments"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://stackoverflow.com/questions/tagged/mlr3" aria-label="Stack Overflow"><span class="fa fab fa-stack-overflow"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://mlr-org.com/" aria-label="RSS"><span class="fa fa-rss"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Piecewise Linear Encoding using Quantiles</h1>
      <small class="dont-index">Source: <a href="https://github.com/mlr-org/mlr3pipelines/blob/master/R/PipeOpEncodePL.R" class="external-link"><code>R/PipeOpEncodePL.R</code></a></small>
      <div class="d-none name"><code>mlr_pipeops_encodeplquantiles.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Encodes <code>numeric</code> and <code>integer</code> feature columns using piecewise lienar encoding. For details, see documentation of
<code><a href="PipeOpEncodePL.html">PipeOpEncodePL</a></code> or Gorishniy et al. (2022).</p>
<p>Bins are constructed by taking the quantiles of the respective feature column as bin boundaries. The first and
last boundaries are set to the minimum and maximum value of the feature, respectively. The number of bins can be
controlled with the <code>numsplits</code> hyperparameter.
Affected feature columns may contain <code>NA</code>s. These are ignored when calculating quantiles.</p>
    </div>


    <div class="section level2">
    <h2 id="format">Format<a class="anchor" aria-label="anchor" href="#format"></a></h2>
    <p><code><a href="https://r6.r-lib.org/reference/R6Class.html" class="external-link">R6Class</a></code> object inheriting from <code><a href="PipeOpEncodePL.html">PipeOpEncodePL</a></code>/<code><a href="PipeOpTaskPreprocSimple.html">PipeOpTaskPreprocSimple</a></code>/<code><a href="PipeOpTaskPreproc.html">PipeOpTaskPreproc</a></code>/<code><a href="PipeOp.html">PipeOp</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="construction">Construction<a class="anchor" aria-label="anchor" href="#construction"></a></h2>



<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>PipeOpEncodePLQuantiles<span class="sc">$</span><span class="fu">new</span>(<span class="at">id =</span> <span class="st">"encodeplquantiles"</span>, <span class="at">param_vals =</span> <span class="fu">list</span>())</span></code></pre><p></p></div><ul><li><p><code>id</code> :: <code>character(1)</code><br>
Identifier of resulting object, default <code>"encodeplquantiles"</code>.</p></li>
<li><p><code>param_vals</code> :: named <code>list</code><br>
List of hyperparameter settings, overwriting the hyperparameter settings that would otherwise be set during construction. Default <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="input-and-output-channels">Input and Output Channels<a class="anchor" aria-label="anchor" href="#input-and-output-channels"></a></h2>


<p>Input and output channels are inherited from <code><a href="PipeOpTaskPreproc.html">PipeOpTaskPreproc</a></code>.</p>
<p>The output is the input <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> with all affected <code>numeric</code> and <code>integer</code> columns encoded using piecewise
linear encoding with bins being derived from the quantiles of the respective original feature column.</p>
    </div>
    <div class="section level2">
    <h2 id="state">State<a class="anchor" aria-label="anchor" href="#state"></a></h2>


<p>The <code>$state</code> is a named <code>list</code> with the <code>$state</code> elements inherited from <code><a href="PipeOpEncodePL.html">PipeOpEncodePL</a></code>/<code><a href="PipeOpTaskPreproc.html">PipeOpTaskPreproc</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="parameters">Parameters<a class="anchor" aria-label="anchor" href="#parameters"></a></h2>


<p>The parameters are the parameters inherited from <code><a href="PipeOpTaskPreproc.html">PipeOpTaskPreproc</a></code>, as well as:</p><ul><li><p><code>numsplits</code> :: <code>integer(1)</code> <br>
Number of bins to create. Initialized to <code>2</code>.</p></li>
<li><p><code>type</code> :: <code>integer(1)</code><br>
Method used to calculate sample quantiles. See help of <code><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">stats::quantile</a></code>. Default is <code>7</code>.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="internals">Internals<a class="anchor" aria-label="anchor" href="#internals"></a></h2>


<p>This overloads the <code>private$.get_bins()</code> method of <code><a href="PipeOpEncodePL.html">PipeOpEncodePL</a></code> and uses the <code><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">stats::quantile</a></code> function
to derive the bins used for piecewise linear encoding.</p>
    </div>
    <div class="section level2">
    <h2 id="fields">Fields<a class="anchor" aria-label="anchor" href="#fields"></a></h2>


<p>Only fields inherited from <code><a href="PipeOp.html">PipeOp</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>


<p>Only methods inherited from <code><a href="PipeOpEncodePL.html">PipeOpEncodePL</a></code>/<code><a href="PipeOpTaskPreproc.html">PipeOpTaskPreproc</a></code>/<code><a href="PipeOp.html">PipeOp</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Gorishniy Y, Rubachev I, Babenko A (2022).
“On Embeddings for Numerical Features in Tabular Deep Learning.”
In <em>Advances in Neural Information Processing Systems</em>, volume 35, 24991–25004.
<a href="https://proceedings.neurips.cc/paper_files/paper/2022/hash/9e9f0ffc3d836836ca96cbf8fe14b105-Abstract-Conference.html" class="external-link">https://proceedings.neurips.cc/paper_files/paper/2022/hash/9e9f0ffc3d836836ca96cbf8fe14b105-Abstract-Conference.html</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>https://mlr-org.com/pipeops.html</p>
<p>Other PipeOps:
<code><a href="PipeOp.html">PipeOp</a></code>,
<code><a href="PipeOpEncodePL.html">PipeOpEncodePL</a></code>,
<code><a href="PipeOpEnsemble.html">PipeOpEnsemble</a></code>,
<code><a href="PipeOpImpute.html">PipeOpImpute</a></code>,
<code><a href="PipeOpTargetTrafo.html">PipeOpTargetTrafo</a></code>,
<code><a href="PipeOpTaskPreproc.html">PipeOpTaskPreproc</a></code>,
<code><a href="PipeOpTaskPreprocSimple.html">PipeOpTaskPreprocSimple</a></code>,
<code><a href="mlr_pipeops.html">mlr_pipeops</a></code>,
<code><a href="mlr_pipeops_adas.html">mlr_pipeops_adas</a></code>,
<code><a href="mlr_pipeops_blsmote.html">mlr_pipeops_blsmote</a></code>,
<code><a href="mlr_pipeops_boxcox.html">mlr_pipeops_boxcox</a></code>,
<code><a href="mlr_pipeops_branch.html">mlr_pipeops_branch</a></code>,
<code><a href="mlr_pipeops_chunk.html">mlr_pipeops_chunk</a></code>,
<code><a href="mlr_pipeops_classbalancing.html">mlr_pipeops_classbalancing</a></code>,
<code><a href="mlr_pipeops_classifavg.html">mlr_pipeops_classifavg</a></code>,
<code><a href="mlr_pipeops_classweights.html">mlr_pipeops_classweights</a></code>,
<code><a href="mlr_pipeops_colapply.html">mlr_pipeops_colapply</a></code>,
<code><a href="mlr_pipeops_collapsefactors.html">mlr_pipeops_collapsefactors</a></code>,
<code><a href="mlr_pipeops_colroles.html">mlr_pipeops_colroles</a></code>,
<code><a href="mlr_pipeops_copy.html">mlr_pipeops_copy</a></code>,
<code><a href="mlr_pipeops_datefeatures.html">mlr_pipeops_datefeatures</a></code>,
<code><a href="mlr_pipeops_decode.html">mlr_pipeops_decode</a></code>,
<code><a href="mlr_pipeops_encode.html">mlr_pipeops_encode</a></code>,
<code><a href="mlr_pipeops_encodeimpact.html">mlr_pipeops_encodeimpact</a></code>,
<code><a href="mlr_pipeops_encodelmer.html">mlr_pipeops_encodelmer</a></code>,
<code><a href="mlr_pipeops_encodepltree.html">mlr_pipeops_encodepltree</a></code>,
<code><a href="mlr_pipeops_featureunion.html">mlr_pipeops_featureunion</a></code>,
<code><a href="mlr_pipeops_filter.html">mlr_pipeops_filter</a></code>,
<code><a href="mlr_pipeops_fixfactors.html">mlr_pipeops_fixfactors</a></code>,
<code><a href="mlr_pipeops_histbin.html">mlr_pipeops_histbin</a></code>,
<code><a href="mlr_pipeops_ica.html">mlr_pipeops_ica</a></code>,
<code><a href="mlr_pipeops_imputeconstant.html">mlr_pipeops_imputeconstant</a></code>,
<code><a href="mlr_pipeops_imputehist.html">mlr_pipeops_imputehist</a></code>,
<code><a href="mlr_pipeops_imputelearner.html">mlr_pipeops_imputelearner</a></code>,
<code><a href="mlr_pipeops_imputemean.html">mlr_pipeops_imputemean</a></code>,
<code><a href="mlr_pipeops_imputemedian.html">mlr_pipeops_imputemedian</a></code>,
<code><a href="mlr_pipeops_imputemode.html">mlr_pipeops_imputemode</a></code>,
<code><a href="mlr_pipeops_imputeoor.html">mlr_pipeops_imputeoor</a></code>,
<code><a href="mlr_pipeops_imputesample.html">mlr_pipeops_imputesample</a></code>,
<code><a href="mlr_pipeops_kernelpca.html">mlr_pipeops_kernelpca</a></code>,
<code><a href="mlr_pipeops_learner.html">mlr_pipeops_learner</a></code>,
<code><a href="mlr_pipeops_learner_pi_cvplus.html">mlr_pipeops_learner_pi_cvplus</a></code>,
<code><a href="mlr_pipeops_learner_quantiles.html">mlr_pipeops_learner_quantiles</a></code>,
<code><a href="mlr_pipeops_missind.html">mlr_pipeops_missind</a></code>,
<code><a href="mlr_pipeops_modelmatrix.html">mlr_pipeops_modelmatrix</a></code>,
<code><a href="mlr_pipeops_multiplicityexply.html">mlr_pipeops_multiplicityexply</a></code>,
<code><a href="mlr_pipeops_multiplicityimply.html">mlr_pipeops_multiplicityimply</a></code>,
<code><a href="mlr_pipeops_mutate.html">mlr_pipeops_mutate</a></code>,
<code><a href="mlr_pipeops_nearmiss.html">mlr_pipeops_nearmiss</a></code>,
<code><a href="mlr_pipeops_nmf.html">mlr_pipeops_nmf</a></code>,
<code><a href="mlr_pipeops_nop.html">mlr_pipeops_nop</a></code>,
<code><a href="mlr_pipeops_ovrsplit.html">mlr_pipeops_ovrsplit</a></code>,
<code><a href="mlr_pipeops_ovrunite.html">mlr_pipeops_ovrunite</a></code>,
<code><a href="mlr_pipeops_pca.html">mlr_pipeops_pca</a></code>,
<code><a href="mlr_pipeops_proxy.html">mlr_pipeops_proxy</a></code>,
<code><a href="mlr_pipeops_quantilebin.html">mlr_pipeops_quantilebin</a></code>,
<code><a href="mlr_pipeops_randomprojection.html">mlr_pipeops_randomprojection</a></code>,
<code><a href="mlr_pipeops_randomresponse.html">mlr_pipeops_randomresponse</a></code>,
<code><a href="mlr_pipeops_regravg.html">mlr_pipeops_regravg</a></code>,
<code><a href="mlr_pipeops_removeconstants.html">mlr_pipeops_removeconstants</a></code>,
<code><a href="mlr_pipeops_renamecolumns.html">mlr_pipeops_renamecolumns</a></code>,
<code><a href="mlr_pipeops_replicate.html">mlr_pipeops_replicate</a></code>,
<code><a href="mlr_pipeops_rowapply.html">mlr_pipeops_rowapply</a></code>,
<code><a href="mlr_pipeops_scale.html">mlr_pipeops_scale</a></code>,
<code><a href="mlr_pipeops_scalemaxabs.html">mlr_pipeops_scalemaxabs</a></code>,
<code><a href="mlr_pipeops_scalerange.html">mlr_pipeops_scalerange</a></code>,
<code><a href="mlr_pipeops_select.html">mlr_pipeops_select</a></code>,
<code><a href="mlr_pipeops_smote.html">mlr_pipeops_smote</a></code>,
<code><a href="mlr_pipeops_smotenc.html">mlr_pipeops_smotenc</a></code>,
<code><a href="mlr_pipeops_spatialsign.html">mlr_pipeops_spatialsign</a></code>,
<code><a href="mlr_pipeops_subsample.html">mlr_pipeops_subsample</a></code>,
<code><a href="mlr_pipeops_targetinvert.html">mlr_pipeops_targetinvert</a></code>,
<code><a href="mlr_pipeops_targetmutate.html">mlr_pipeops_targetmutate</a></code>,
<code><a href="mlr_pipeops_targettrafoscalerange.html">mlr_pipeops_targettrafoscalerange</a></code>,
<code><a href="mlr_pipeops_textvectorizer.html">mlr_pipeops_textvectorizer</a></code>,
<code><a href="mlr_pipeops_threshold.html">mlr_pipeops_threshold</a></code>,
<code><a href="mlr_pipeops_tomek.html">mlr_pipeops_tomek</a></code>,
<code><a href="mlr_pipeops_tunethreshold.html">mlr_pipeops_tunethreshold</a></code>,
<code><a href="mlr_pipeops_unbranch.html">mlr_pipeops_unbranch</a></code>,
<code><a href="mlr_pipeops_updatetarget.html">mlr_pipeops_updatetarget</a></code>,
<code><a href="mlr_pipeops_vtreat.html">mlr_pipeops_vtreat</a></code>,
<code><a href="mlr_pipeops_yeojohnson.html">mlr_pipeops_yeojohnson</a></code></p>
<p>Other Piecewise Linear Encoding PipeOps:
<code><a href="PipeOpEncodePL.html">PipeOpEncodePL</a></code>,
<code><a href="mlr_pipeops_encodepltree.html">mlr_pipeops_encodepltree</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mlr3.mlr-org.com" class="external-link">mlr3</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">task</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">tsk</a></span><span class="op">(</span><span class="st">"iris"</span><span class="op">)</span><span class="op">$</span><span class="fu">select</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Petal.Width"</span>, <span class="st">"Petal.Length"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pop</span> <span class="op">=</span> <span class="fu"><a href="po.html">po</a></span><span class="op">(</span><span class="st">"encodeplquantiles"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">train_out</span> <span class="op">=</span> <span class="va">pop</span><span class="op">$</span><span class="fu">train</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">task</span><span class="op">)</span><span class="op">)</span><span class="op">[[</span><span class="fl">1L</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="co"># Calculated bin boundaries per feature</span></span></span>
<span class="r-in"><span><span class="va">pop</span><span class="op">$</span><span class="va">state</span><span class="op">$</span><span class="va">bins</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $Petal.Length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.00 4.35 6.90</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.1 1.3 2.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="co"># Each feature was split into two encoded features using piecewise linear encoding</span></span></span>
<span class="r-in"><span><span class="va">train_out</span><span class="op">$</span><span class="fu">head</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Species Petal.Length.bin1 Petal.Length.bin2 Petal.Width.bin1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;fctr&gt;             &lt;num&gt;             &lt;num&gt;            &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:  setosa        0.11940299                 0       0.08333333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:  setosa        0.11940299                 0       0.08333333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:  setosa        0.08955224                 0       0.08333333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:  setosa        0.14925373                 0       0.08333333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:  setosa        0.11940299                 0       0.08333333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:  setosa        0.20895522                 0       0.25000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Petal.Width.bin2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:                0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Prediction works the same as training, using the bins learned during training</span></span></span>
<span class="r-in"><span><span class="va">predict_out</span> <span class="op">=</span> <span class="va">pop</span><span class="op">$</span><span class="fu">predict</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">task</span><span class="op">)</span><span class="op">)</span><span class="op">[[</span><span class="fl">1L</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">predict_out</span><span class="op">$</span><span class="fu">head</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Species Petal.Length.bin1 Petal.Length.bin2 Petal.Width.bin1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;fctr&gt;             &lt;num&gt;             &lt;num&gt;            &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:  setosa        0.11940299                 0       0.08333333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:  setosa        0.11940299                 0       0.08333333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:  setosa        0.08955224                 0       0.08333333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:  setosa        0.14925373                 0       0.08333333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:  setosa        0.11940299                 0       0.08333333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:  setosa        0.20895522                 0       0.25000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Petal.Width.bin2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:                0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Binning into three bins per feature</span></span></span>
<span class="r-in"><span><span class="co"># Using the nearest even order statistic for caluclating quantiles</span></span></span>
<span class="r-in"><span><span class="va">pop</span><span class="op">$</span><span class="va">param_set</span><span class="op">$</span><span class="fu">set_values</span><span class="op">(</span>numsplits <span class="op">=</span> <span class="fl">4</span>, type <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">train_out</span> <span class="op">=</span> <span class="va">pop</span><span class="op">$</span><span class="fu">train</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">task</span><span class="op">)</span><span class="op">)</span><span class="op">[[</span><span class="fl">1L</span><span class="op">]</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="co"># Calculated bin boundaries per feature</span></span></span>
<span class="r-in"><span><span class="va">pop</span><span class="op">$</span><span class="va">state</span><span class="op">$</span><span class="va">bins</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $Petal.Length</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.0 1.6 4.3 5.1 6.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $Petal.Width</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.1 0.3 1.3 1.8 2.5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="co"># Each feature was split into three encoded features using</span></span></span>
<span class="r-in"><span><span class="co"># piecewise linear encoding</span></span></span>
<span class="r-in"><span><span class="va">train_out</span><span class="op">$</span><span class="fu">head</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Species Petal.Length.bin1 Petal.Length.bin2 Petal.Length.bin3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;fctr&gt;             &lt;num&gt;             &lt;num&gt;             &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:  setosa         0.6666667        0.00000000                 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:  setosa         0.6666667        0.00000000                 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:  setosa         0.5000000        0.00000000                 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:  setosa         0.8333333        0.00000000                 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:  setosa         0.6666667        0.00000000                 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:  setosa         1.0000000        0.03703704                 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Petal.Length.bin4 Petal.Width.bin1 Petal.Width.bin2 Petal.Width.bin3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                &lt;num&gt;            &lt;num&gt;            &lt;num&gt;            &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:                 0              0.5              0.0                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:                 0              0.5              0.0                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:                 0              0.5              0.0                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:                 0              0.5              0.0                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:                 0              0.5              0.0                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:                 0              1.0              0.1                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Petal.Width.bin4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:                0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:                0</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Martin Binder, Florian Pfisterer, Lennart Schneider, Bernd Bischl, Michel Lang, Sebastian Fischer, Susanne Dandl.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

