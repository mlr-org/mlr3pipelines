<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Robustify a learner — mlr_graphs_robustify • mlr3pipelines</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.9/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.9/font.css" rel="stylesheet"><link href="../deps/Roboto_Slab-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="../deps/MathJax-3.2.2/tex-chtml.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Robustify a learner — mlr_graphs_robustify"><meta name="description" content="Creates a Graph that can be used to robustify any subsequent learner.
Performs the following steps:
Drops empty factor levels using PipeOpFixFactors
Imputes numeric features using PipeOpImputeHist and PipeOpMissInd
Imputes factor features using PipeOpImputeOOR
Encodes factors using one-hot-encoding. Factors with a cardinality &amp;gt; max_cardinality are
collapsed using PipeOpCollapseFactors


The graph is built conservatively, i.e. the function always tries to assure everything works.
If a learner is provided, some steps can be left out, i.e. if the learner can deal with
factor variables, no encoding is performed.
All input arguments are cloned and have no references in common with the returned Graph."><meta property="og:description" content="Creates a Graph that can be used to robustify any subsequent learner.
Performs the following steps:
Drops empty factor levels using PipeOpFixFactors
Imputes numeric features using PipeOpImputeHist and PipeOpMissInd
Imputes factor features using PipeOpImputeOOR
Encodes factors using one-hot-encoding. Factors with a cardinality &amp;gt; max_cardinality are
collapsed using PipeOpCollapseFactors


The graph is built conservatively, i.e. the function always tries to assure everything works.
If a learner is provided, some steps can be left out, i.e. if the learner can deal with
factor variables, no encoding is performed.
All input arguments are cloned and have no references in common with the returned Graph."><meta property="og:image" content="https://mlr3pipelines.mlr-org.com/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mlr3pipelines</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.7.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fa-file-alt"></span> Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/extending.html">Adding new PipeOps</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://mlr3book.mlr-org.com"><span class="fa fa-link"></span> mlr3book</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mlr-org/mlr3pipelines/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://lmmisld-lmu-stats-slds.srv.mwn.de/mlr_invite/" aria-label="Mattermost chat"><span class="fa fa-comments"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://stackoverflow.com/questions/tagged/mlr3" aria-label="Stack Overflow"><span class="fa fab fa-stack-overflow"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://mlr-org.com/" aria-label="RSS"><span class="fa fa-rss"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Robustify a learner</h1>
      <small class="dont-index">Source: <a href="https://github.com/mlr-org/mlr3pipelines/blob/v0.7.2/R/pipeline_robustify.R" class="external-link"><code>R/pipeline_robustify.R</code></a></small>
      <div class="d-none name"><code>mlr_graphs_robustify.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Creates a <code><a href="Graph.html">Graph</a></code> that can be used to robustify any subsequent learner.
Performs the following steps:</p><ul><li><p>Drops empty factor levels using <code><a href="mlr_pipeops_fixfactors.html">PipeOpFixFactors</a></code></p></li>
<li><p>Imputes <code>numeric</code> features using <code><a href="mlr_pipeops_imputehist.html">PipeOpImputeHist</a></code> and <code><a href="mlr_pipeops_missind.html">PipeOpMissInd</a></code></p></li>
<li><p>Imputes <code>factor</code> features using <code><a href="mlr_pipeops_imputeoor.html">PipeOpImputeOOR</a></code></p></li>
<li><p>Encodes <code>factors</code> using <code>one-hot-encoding</code>. Factors with a cardinality &gt; max_cardinality are
collapsed using <code><a href="mlr_pipeops_collapsefactors.html">PipeOpCollapseFactors</a></code></p></li>
</ul><p>The graph is built conservatively, i.e. the function always tries to assure everything works.
If a learner is provided, some steps can be left out, i.e. if the learner can deal with
factor variables, no encoding is performed.</p>
<p>All input arguments are cloned and have no references in common with the returned <code><a href="Graph.html">Graph</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">pipeline_robustify</span><span class="op">(</span></span>
<span>  task <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  learner <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  impute_missings <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  factors_to_numeric <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  max_cardinality <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  ordered_action <span class="op">=</span> <span class="st">"factor"</span>,</span>
<span>  character_action <span class="op">=</span> <span class="st">"factor"</span>,</span>
<span>  POSIXct_action <span class="op">=</span> <span class="st">"numeric"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-task">task<a class="anchor" aria-label="anchor" href="#arg-task"></a></dt>
<dd><p><code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> <br>
A <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> to create a robustifying pipeline for.
Optional, if omitted, the "worst possible" <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> is assumed and the full pipeline is created.</p></dd>


<dt id="arg-learner">learner<a class="anchor" aria-label="anchor" href="#arg-learner"></a></dt>
<dd><p><code><a href="https://mlr3.mlr-org.com/reference/Learner.html" class="external-link">Learner</a></code> <br>
A learner to create a robustifying pipeline for. Optional, if omitted,
the "worst possible" <code><a href="https://mlr3.mlr-org.com/reference/Learner.html" class="external-link">Learner</a></code> is assumed and a more conservative pipeline is built.</p></dd>


<dt id="arg-impute-missings">impute_missings<a class="anchor" aria-label="anchor" href="#arg-impute-missings"></a></dt>
<dd><p><code>logical(1)</code> | <code>NULL</code> <br>
Should missing values be imputed? Defaults to <code>NULL</code>: imputes if the task has
missing values (or factors that are not encoded to numerics) and the learner can not handle them.</p></dd>


<dt id="arg-factors-to-numeric">factors_to_numeric<a class="anchor" aria-label="anchor" href="#arg-factors-to-numeric"></a></dt>
<dd><p><code>logical(1)</code> | <code>NULL</code> <br>
Should (ordered and unordered) factors be encoded? Defaults to <code>NULL</code>: encodes if the task has factors (or character columns that get converted to factor)
and the learner can not handle factors.</p></dd>


<dt id="arg-max-cardinality">max_cardinality<a class="anchor" aria-label="anchor" href="#arg-max-cardinality"></a></dt>
<dd><p><code>integer(1)</code> <br>
Maximum number of factor levels allowed. See above. Default: 1000.</p></dd>


<dt id="arg-ordered-action">ordered_action<a class="anchor" aria-label="anchor" href="#arg-ordered-action"></a></dt>
<dd><p><code>character(1)</code><br>
How to handle <code>ordered</code> columns: <code>"factor"</code> (default) or <code>"factor!"</code>: convert to <code>factor</code> columns;
<code>"numeric"</code> or <code>"numeric!"</code>: convert to <code>numeric</code> columns; <code>"integer"</code> or <code>"integer!"</code>: convert to <code>integer</code> columns; <code>"ignore"</code> or <code>"ignore!"</code>: ignore.
When <code>task</code> is given and has no <code>ordered</code> columns, or when <code>learner</code> is given and can handle <code>ordered</code>, then
<code>"factor"</code>, <code>"numeric"</code> and <code>"integer"</code> are treated like <code>"ignore"</code>. This means it is necessary to add the exclamation point to
override <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> or <code><a href="https://mlr3.mlr-org.com/reference/Learner.html" class="external-link">Learner</a></code> properties when given. <code>"ignore"</code> and <code>"ignore!"</code> therefore
behave completely identically, <code>"ignore!"</code> is only present for consistency.<br>
When <code>ordered</code> features are converted to <code>factor</code>, then they are treated like <code>factor</code> features further down in the pipeline,
and are possibly eventually converted to <code>numeric</code>s, but in a different way: <code>factor</code>s get one-hot encoded, <code>ordered_action</code> = <code>"numeric"</code>
converts ordered using <code>as.numeric</code> to their integer-valued rank.</p></dd>


<dt id="arg-character-action">character_action<a class="anchor" aria-label="anchor" href="#arg-character-action"></a></dt>
<dd><p><code>character(1)</code><br>
How to handle <code>character</code> columns: <code>"factor"</code> (default) or <code>"factor!"</code>: convert to <code>factor</code> columns;
<code>"matrix"</code> or <code>"matrix!"</code>: Use <code><a href="mlr_pipeops_textvectorizer.html">PipeOpTextVectorizer</a></code>. <code>"ignore"</code> or <code>"ignore!"</code>: ignore.
When <code>task</code> is given and has no <code>character</code> columns, or when <code>learner</code> is given and can handle <code>character</code>, then
<code>"factor"</code> and <code>"matrix"</code> are treated like <code>"ignore"</code>. This means it is necessary to add the exclamation point to
override <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> or <code><a href="https://mlr3.mlr-org.com/reference/Learner.html" class="external-link">Learner</a></code> properties when given. <code>"ignore"</code> and <code>"ignore!"</code> therefore
behave completely identically, <code>"ignore!"</code> is only present for consistency.<br>
When <code>character</code> columns are converted to <code>factor</code>, then they are treated like <code>factor</code> further down in the pipeline,
and are possibly eventually converted to <code>numeric</code>s, using one-hot encoding.</p></dd>


<dt id="arg-posixct-action">POSIXct_action<a class="anchor" aria-label="anchor" href="#arg-posixct-action"></a></dt>
<dd><p><code>character(1)</code><br>
How to handle <code>POSIXct</code> columns: <code>"numeric"</code> (default) or <code>"numeric!"</code>: convert to <code>numeric</code> columns;
<code>"datefeatures"</code> or <code>"datefeatures!"</code>: Use <code><a href="mlr_pipeops_datefeatures.html">PipeOpDateFeatures</a></code>. <code>"ignore"</code> or <code>"ignore!"</code>: ignore.
When <code>task</code> is given and has no <code>POSIXct</code> columns, or when <code>learner</code> is given and can handle <code>POSIXct</code>, then
<code>"numeric"</code> and <code>"datefeatures"</code> are treated like <code>"ignore"</code>. This means it is necessary to add the exclamation point to
override <code><a href="https://mlr3.mlr-org.com/reference/Task.html" class="external-link">Task</a></code> or <code><a href="https://mlr3.mlr-org.com/reference/Learner.html" class="external-link">Learner</a></code> properties when given. <code>"ignore"</code> and <code>"ignore!"</code> therefore
behave completely identically, <code>"ignore!"</code> is only present for consistency.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code><a href="Graph.html">Graph</a></code></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mlr3.mlr-org.com" class="external-link">mlr3</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">lrn</span> <span class="op">=</span> <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">lrn</a></span><span class="op">(</span><span class="st">"regr.rpart"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">task</span> <span class="op">=</span> <span class="va">mlr_tasks</span><span class="op">$</span><span class="fu">get</span><span class="op">(</span><span class="st">"boston_housing"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">gr</span> <span class="op">=</span> <span class="fu">pipeline_robustify</span><span class="op">(</span><span class="va">task</span>, <span class="va">lrn</span><span class="op">)</span> <span class="op"><a href="grapes-greater-than-greater-than-grapes.html">%&gt;&gt;%</a></span> <span class="fu"><a href="po.html">po</a></span><span class="op">(</span><span class="st">"learner"</span>, <span class="va">lrn</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://mlr3.mlr-org.com/reference/resample.html" class="external-link">resample</a></span><span class="op">(</span><span class="va">task</span>, <span class="va"><a href="mlr_learners_graph.html">GraphLearner</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">gr</span><span class="op">)</span>, <span class="fu"><a href="https://mlr3.mlr-org.com/reference/mlr_sugar.html" class="external-link">rsmp</a></span><span class="op">(</span><span class="st">"holdout"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;ResampleResult&gt; with 1 resampling iterations</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         task_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  boston_housing</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                                        learner_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  removeconstants_prerobustify.fixfactors.removeconstants_postrobustify.regr.rpart</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  resampling_id iteration  prediction_test warnings errors</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        holdout         1 &lt;PredictionRegr&gt;        0      0</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Martin Binder, Florian Pfisterer, Lennart Schneider, Bernd Bischl, Michel Lang, Sebastian Fischer, Susanne Dandl.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

