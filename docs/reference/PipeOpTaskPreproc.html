<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Google Site Verification -->
<meta name="google-site-verification" content="BrjL5fpoyHZu1rR8rwnnM2MBO3u3iIFB8NsmSuOsY84" />
<title>PipeOpTaskPreproc — PipeOpTaskPreproc • mlr3pipelines</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  <link href="../extra.css" rel="stylesheet">
  <script src="../extra.js"></script>
<meta property="og:title" content="PipeOpTaskPreproc — PipeOpTaskPreproc" />

<meta property="og:description" content="Base class for handling most "preprocessing" operations. These
are operations that have exactly one Task input and one Task output,
and expect the column layout of these tasks during input and output
to be the same.
Users must implement $train_task() and $predict_task(), which have a Task
input and should return that Task. The Task should, if possible, be
manipulated in-place, and should not be cloned.
If can_subset_cols is TRUE, then the hyperparameter affect_columns
is added, which is a function that takes the Task as input and returns
a character as output, indicating what columns to choose." />

<meta property="og:image" content="https://mlr3pipelines.mlr-org.com/logo.png" />
<meta name="twitter:card" content="summary" />


<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->




<link rel="icon" type="image/png" href="https://mlr-org.github.io/mlr/favicon.ico">
<link rel="apple-touch-icon" type="image/png" href="https://mlr-org.github.io/mlr/favicon.ico">
  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html"></a>
      </div>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Basics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/a_simple_pipeline.html">A simple pipeline</a>
    </li>
    <li>
      <a href="../articles/basic_concepts.html">Showcase: Basic Concepts: PipeOp and Graph</a>
    </li>
    <li>
      <a href="../articles/branching.html">Showcase: Branching</a>
    </li>
    <li>
      <a href="../articles/create_a_custom_pipeop.html">Custom PipeOps</a>
    </li>
    <li>
      <a href="../articles/stacking_and_bagging.html">Showcase: Bagging and Stacking</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Appendix
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../reference/index.html">Function Reference</a>
    </li>
    <li>
      <a href="../news/index.html">News</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/mlr-org/mlr3pipelines">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.slack.com">
    <span class="fa fa-slack"></span>
     
  </a>
</li>
<li>
  <a href="https://stackoverflow.com/questions/tagged/mlr">
    <span class="fa fa-stack-overflow"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-web.com/">
    <span class="fa fa-rss"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>PipeOpTaskPreproc</h1>
    <small>Source: <a href='https://github.com/mlr-org/mlr3pipelines/blob/master/R/PipeOpTaskPreproc.R'><code>R/PipeOpTaskPreproc.R</code></a></small>
    </div>

    
    <p>Base class for handling most "preprocessing" operations. These
are operations that have exactly one Task input and one Task output,
and expect the column layout of these tasks during input and output
to be the same.</p>
<p>Users must implement <code>$train_task()</code> and <code>$predict_task()</code>, which have a <code>Task</code>
input and should return that <code>Task</code>. The <code>Task</code> should, if possible, be
manipulated in-place, and should not be cloned.</p>
<p>If <code>can_subset_cols</code> is <code>TRUE</code>, then the hyperparameter <code>affect_columns</code>
is added, which is a function that takes the Task as input and returns
a <code>character</code> as output, indicating what columns to choose.</p>
    

    <pre class="usage"><span class='no'>PipeOpTaskPreproc</span></pre>
        
    <h2 class="hasAnchor" id="format"><a class="anchor" href="#format"></a>Format</h2>

    <p>Abstract <code>R6Class</code> inheriting from <code><a href='PipeOp.html'>PipeOp</a></code>.</p>
    
    <h2 class="hasAnchor" id="public-members-active-bindings"><a class="anchor" href="#public-members-active-bindings"></a>Public Members / Active Bindings</h2>

    
    <ul>
<li><p><code>intasklayout</code>  :: <code>data.table</code> with columns <code>id</code>, <code>type</code> <br />
Set during <code>$train()</code>: <code>$feature_types</code> of training <code>Task</code>, is used for verification
during <code>$predict()</code> that columns have not changed.</p></li>
<li><p><code>outtasklayout</code> :: <code>data.table</code> with columns <code>id</code>, <code>type</code> <br />
Set during <code>$train()</code>: <code>$feature_types</code> of transformed <code>Task</code>, is used for verification
during <code>$predict()</code> that the transformed <code>Task</code> is the same as during training.</p></li>
<li><p><code>affect_columns</code> :: <code>NULL</code> | <code>function</code> <br />
Can be used to subset the columns that the <code>PipeOp</code> operates on. If <code>$affect_columns</code> is <code>NULL</code>,
then all columns are given to the <code>$train</code> / <code>$predict</code> function. If this is a <code>function</code>, it
should take one argument (the input <code>Task</code>) and return a <code>character</code> indicating the feature
columns that should be operated on. <code>$affect_columns()</code> is then called during training and
only features named in its return value are seen by the training / prediction function. <br />
This should not be changed if <code>can_subset_columns</code> is <code>FALSE</code>, and depends on the <code>PipeOpTaskPreproc</code> subclass.</p></li>
<li><p><code>affected_cols</code> :: <code>character</code> <br />
Set during <code>$train()</code>: Indicating the names of features to operate on, if  parameter
<code>$affect_columns</code> is set.</p></li>
<li><p><code>can_subset_columns</code> :: <code><a href='https://www.rdocumentation.org/packages/base/topics/logical'>logical(1)</a></code> <br />
Whether <code>affect_columns</code> can be set to something other than <code>NULL</code>. Read-only, value depends on
the <code>PipeOpTaskPreproc</code> subclass.</p></li>
</ul>
    
    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    
    <ul>
<li><p><code>PipeOpTaskPreproc$new(id, param_set = ParamSet$new(), can_subset_cols = TRUE)</code> <br />
(<code><a href='https://www.rdocumentation.org/packages/base/topics/character'>character(1)</a></code>, <code>ParamSet</code>, <code><a href='https://www.rdocumentation.org/packages/base/topics/logical'>logical(1)</a></code>) -&gt; <code>self</code> <br />
Constructor. The <code>can_subset_cols</code> argument should be set by the inheriting class to <code>FALSE</code> if
affecting only a subset of columns chosen by the user should not be possible; this switches
<code>can_subset_cols</code> to <code>FALSE</code>.</p></li>
<li><p><code>train_task(task)</code> <br />
(<code>Task</code>) -&gt; <code>Task</code> <br />
Train <code>PipeOpTaskPreproc</code> on <code>task</code>, transform it and store a state in <code>$state</code>. The transformed <code>Task</code> must
be returned. <code>task</code> should not be cloned, instead it should be changed in-place. <br />
This method can be overloaded when inheriting from <code>PipeOpTaskPreproc</code>, together with <code>$predict_task()</code>;
alternatively, <code>$train_dt()</code> and <code>$predict_dt()</code> (and possibly <code>$select_cols()</code>) can be overloaded.</p></li>
<li><p><code>predict_task(task)</code> <br />
(<code>Task</code>) -&gt; <code>Task</code> <br />
Predict on new data in <code>task</code>, possibly using the stored <code>$state</code>. <code>task</code> should not be cloned, instead it should be
changed in-place. <br />
This method can be overloaded when inheriting from <code>PipeOpTaskPreproc</code>, together with <code>$train_task()</code>;
alternatively, <code>$train_dt()</code> and <code>$predict_dt()</code> (and possibly <code>$select_cols()</code>) can be overloaded.</p></li>
<li><p><code>train_dt(dt)</code> <br />
(<code>data.table</code>) -&gt; <code>any</code> <br />
Train <code>PipeOpTaskPreproc</code> on <code>dt</code>, transform it and store a state in <code>$state</code>. A transformed object must be returned
that can be converted to a <code>data.table</code> using <code>as.data.table</code>. <code>dt</code> does not need to be copied deliberately, it
is possible and encouraged to change it in-place. <br />
This method can be overloaded when inheriting <code>PipeOpTaskPreproc</code>, together with <code>$predict_dt()</code> and optionally
<code>$select_cols()</code>; alternatively, <code>$train_task()</code> and <code>$predict_task()</code> can be overloaded.</p></li>
<li><p><code>predict_dt(dt)</code> <br />
(<code>data.table</code>) -&gt; <code>any</code> <br />
Predict on new data in <code>dt</code>, possibly using the stored <code>$state</code>. A transformed object must be returned
that can be converted to a <code>data.table</code> using <code>as.data.table</code>. <code>dt</code> does not need to be copied deliberately, it
is possible and encouraged to change it in-place. <br />
This method can be overloaded when inheriting <code>PipeOpTaskPreproc</code>, together with <code>$train_dt()</code> and optionally
<code>$select_cols()</code>; alternatively, <code>$train_task()</code> and <code>$predict_task()</code> can be overloaded.</p></li>
<li><p><code>select_cols(dt)</code> <br />
(<code>data.table</code>) -&gt; <code>character</code> <br />
Selects which columns the <code>PipeOp</code> operates on, if <code>$train_dt()</code> and <code>$predict_dt()</code> are overloaded. This function
is not called if <code>$train_task()</code> and <code>$predict_task()</code> are overloaded. It is furthermore not supposed to be changed
by the user, who should use <code>affect_columns</code>. <code>select_cols</code> is for the <em>ineriting class</em> to determine which columns
the operator should function on, e.g. based on feature type. <br />
This method can optionally be overloaded when inheriting <code>PipeOpTaskPreproc</code>, together with <code>$train_dt()</code> and
<code>$predict_dt()</code>; alternatively, <code>$train_task()</code> and <code>$predict_task()</code> can be overloaded. <br />
If this method is not overloaded, it defaults to selecting all columns.</p></li>
</ul>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other mlr3pipelines backend related: <code><a href='Graph.html'>Graph</a></code>,
  <code><a href='PipeOpTaskPreprocSimple.html'>PipeOpTaskPreprocSimple</a></code>,
  <code><a href='PipeOp.html'>PipeOp</a></code>, <code><a href='mlr_pipeops.html'>mlr_pipeops</a></code></p>
<p>Other PipeOps: <code><a href='PipeOpEnsemble.html'>PipeOpEnsemble</a></code>,
  <code><a href='PipeOpNewTarget.html'>PipeOpNewTarget</a></code>, <code><a href='PipeOp.html'>PipeOp</a></code>,
  <code><a href='mlr_pipeop_NULL.html'>mlr_pipeop_NULL</a></code>,
  <code><a href='mlr_pipeop_backup_learner.html'>mlr_pipeop_backup_learner</a></code>,
  <code><a href='mlr_pipeop_balancesample.html'>mlr_pipeop_balancesample</a></code>,
  <code><a href='mlr_pipeop_branch.html'>mlr_pipeop_branch</a></code>,
  <code><a href='mlr_pipeop_chunk.html'>mlr_pipeop_chunk</a></code>,
  <code><a href='mlr_pipeop_copy.html'>mlr_pipeop_copy</a></code>,
  <code><a href='mlr_pipeop_encode.html'>mlr_pipeop_encode</a></code>,
  <code><a href='mlr_pipeop_featureunion.html'>mlr_pipeop_featureunion</a></code>,
  <code><a href='mlr_pipeop_filter.html'>mlr_pipeop_filter</a></code>,
  <code><a href='mlr_pipeop_impute.html'>mlr_pipeop_impute</a></code>,
  <code><a href='mlr_pipeop_learner.html'>mlr_pipeop_learner</a></code>,
  <code><a href='mlr_pipeop_majorityvote.html'>mlr_pipeop_majorityvote</a></code>,
  <code><a href='mlr_pipeop_modelavg.html'>mlr_pipeop_modelavg</a></code>,
  <code><a href='mlr_pipeop_nloptmajorityvote.html'>mlr_pipeop_nloptmajorityvote</a></code>,
  <code><a href='mlr_pipeop_pca.html'>mlr_pipeop_pca</a></code>,
  <code><a href='mlr_pipeop_scale.html'>mlr_pipeop_scale</a></code>,
  <code><a href='mlr_pipeop_subsample.html'>mlr_pipeop_subsample</a></code>,
  <code><a href='mlr_pipeop_unbranch.html'>mlr_pipeop_unbranch</a></code>,
  <code><a href='mlr_pipeops.html'>mlr_pipeops</a></code></p></div>
    

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      
      <li><a href="#format">Format</a></li>

      <li><a href="#public-members-active-bindings">Public Members / Active Bindings</a></li>

      <li><a href="#methods">Methods</a></li>

      <li><a href="#see-also">See also</a></li>
          </ul>

  </div>
</div>

      <footer>
      <!--<div class="copyright">
  <p>Developed by Martin Binder.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>
-->
      </footer>
   </div>

   

  </body>
</html>

